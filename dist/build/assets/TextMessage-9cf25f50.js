import{_,d as m,o as s,e as o,b as t,t as r,h as l,i as u,v as p,F as b,j as v,k as c}from"./appInertia-bd981cc7.js";const g={props:{patientId:Number,moduleId:Number,componentId:Number,stageId:Number,stepId:Number,formErrors:String},data(){return{selectedCallNotAnswerdContentScript:0,callNotAnswerContentScript:null,callNotScript:null,valid:null,mob_number:null,mobval:null,mob:null,home_number:null,home_number_value:null,home:null}},mounted(){this.fetchCallNotAnswerContentScript(),this.fetchMessageContent()},methods:{async fetchMessageContent(){await m.get(`/ccm/get-calltext/${this.moduleId}/${this.patientId}/${this.componentId}/call_message`).then(n=>{this.valid=n.data.valid,this.mob_number=n.data.mob_number,this.mobval=n.data.mobval,this.mob=n.data.mob,this.home_number=n.data.home_number,this.home_number_value=n.data.home_number_value,this.home=n.data.home}).catch(n=>{console.error("Error fetching data:",n)})},async fetchCallNotAnswerContentScript(){await m.get(`/org/get_content_scripts/${this.moduleId}/${this.componentId}/${this.stageId}/${this.stepId}/content_template`).then(n=>{this.callNotAnswerContentScript=n.data,this.selectedCallNotAnswerdContentScript=this.callNotAnswerContentScript[this.callNotAnswerContentScript.length-1].id,this.callNotAnsScript(this.selectedCallNotAnswerdContentScript)}).catch(n=>{console.error("Error fetching data:",n)})},async callNotAnsScript(n){await m.get(`/ccm/get-call-scripts-by-id/${n}/${this.patientId}/call-script`).then(i=>{this.callNotScript=i.data.finaldata,this.callNotScript=this.callNotScript.replace(/(<([^>]+)>)/ig,""),this.callNotScript=this.callNotScript.replace(/&nbsp;/g," "),this.callNotScript=this.callNotScript.replace(/&amp;/g,"&")}).catch(i=>{console.error("Error fetching data:",i)})}}},N={class:"mb-3",id:"txt-msg"},C={key:0,class:"row"},f={class:"col-md-6"},S=t("label",null,[c("Contact No. "),t("span",{class:"error"},"*")],-1),y={class:"forms-element custom-select",name:"phone_no",id:"contact_number"},w=t("option",{value:""},"Choose Contact Number",-1),x=["value"],k=["value"],A={key:0,class:"invalid-feedback",style:{display:"block"}},I={class:"col-md-6"},T=t("label",null,[c("Template Name "),t("span",{class:"error"},"*")],-1),E=t("option",{value:"0"},"Select Template",-1),P=["value"],M=t("div",{id:""},null,-1),V={key:0,class:"alert alert-warning mt-2 ml-2"},B=t("input",{type:"hidden",name:"error",value:"Patient Cell Number is Unavailable. Text Message cannot be sent to this patient."},null,-1),U={key:1,class:"row",id:"textarea"},z={class:"col-md-12 form-group mb-3"},D=t("label",null,[t("b",null,"Content"),t("span",{class:"error"},"*")],-1),F={name:"text_msg",class:"form-control",id:"ccm_content_area",style:{padding:"5px",width:"47em","min-height":"5em",overflow:"auto",height:"87px"}},O={key:0,class:"invalid-feedback",style:{display:"block"}},j={key:2,class:"alert alert-warning mt-2 ml-2"},L=t("input",{type:"hidden",name:"error",value:"Texting has been disabled for the system."},null,-1),q={key:3,class:"alert alert-warning mt-2 ml-2"},G=t("input",{type:"hidden",name:"error",value:"Texting is disabled for Patient's Organization."},null,-1),H={key:4,class:"alert alert-warning mt-2 ml-2"},J=t("input",{type:"hidden",name:"error",value:"Patient has not given consent to send text message."},null,-1);function K(n,i,d,Q,e,h){return s(),o("div",N,[e.valid==1?(s(),o("div",C,[t("div",f,[S,t("select",y,[w,e.mob==1?(s(),o("option",{key:0,value:e.mobval},r(e.mob_number)+" (P)",9,x)):l("",!0),e.home==1?(s(),o("option",{key:1,value:e.home_number_value},r(e.home_number)+" (s)",9,k)):l("",!0)]),d.formErrors.phone_no?(s(),o("div",A,r(d.formErrors.phone_no[0]),1)):l("",!0)]),t("div",I,[T,u(t("select",{id:"ccm_content_title",class:"custom-select show-tick custom-select",name:"call_not_answer_template_id",onChange:i[0]||(i[0]=a=>h.callNotAnsScript(e.selectedCallNotAnswerdContentScript)),"onUpdate:modelValue":i[1]||(i[1]=a=>e.selectedCallNotAnswerdContentScript=a)},[E,(s(!0),o(b,null,v(e.callNotAnswerContentScript,a=>(s(),o("option",{key:a.id,value:a.id},r(a.content_title),9,P))),128))],544),[[p,e.selectedCallNotAnswerdContentScript]])]),M,e.mob==0&&e.home==0?(s(),o("div",V,"Patient Cell Number is Unavailable. Text Message cannot be sent to this patient.")):l("",!0),c(),B])):l("",!0),e.valid==1?(s(),o("div",U,[t("div",z,[D,t("textarea",F,r(e.callNotScript),1),d.formErrors.text_msg?(s(),o("div",O,r(d.formErrors.text_msg[0]),1)):l("",!0)])])):l("",!0),e.valid==2?(s(),o("div",j,"Texting has been disabled for the system")):l("",!0),c(),L,e.valid==3?(s(),o("div",q,"Texting is disabled for Patient's Organization")):l("",!0),c(),G,e.valid==0?(s(),o("div",H,"Patient has not given consent to send text message")):l("",!0),c(),J])}const W=_(g,[["render",K]]);export{W as default};
