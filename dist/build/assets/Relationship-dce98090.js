import{_ as d,d as o,o as m,e as u,b as t,I as l,q as c}from"./appInertia-bd981cc7.js";const _={props:{patientId:Number,moduleId:Number,componentId:Number},data(){return{RelationshipQuestionnaire:null,stageId:0,formErrors:{},showAlert:!1,time:null,timerStatus:null}},mounted(){this.fetchData(),this.time=document.getElementById("page_landing_times").value,this.timerStatus=document.getElementById("timer_runing_status").value},methods:{fetchData(){o.get(`/patients/patient-relationship-questionnaire/${this.patientId}/${this.moduleId}/${this.componentId}/patient-relationship-questionnaire`).then(s=>{this.RelationshipQuestionnaire=s.data}).catch(s=>{console.error("Error fetching data:",s)})},async submitRelationshipForm(){let s=document.getElementById("relationship_form"),n=new FormData(s);o.defaults.headers.common["X-CSRF-TOKEN"]=document.querySelector('meta[name="csrf-token"]').content;try{this.formErrors={};const e=await o.post("/ccm/monthly-monitoring-call-relationship",n);e&&e.status==200&&(this.showAlert=!0,updateTimer(this.patientId,1,this.moduleId),$(".form_start_time").val(e.data.form_start_time),setTimeout(()=>{this.time=document.getElementById("page_landing_times").value,this.showAlert=!1},3e3),this.$emit("form-submitted"))}catch(e){e.response&&e.response.status===422?this.formErrors=e.response.data.errors:console.error("Error submitting form:",e)}}}},h={class:"card"},p={class:"card-body"},f=t("input",{type:"hidden",name:"uid"},null,-1),y=["value"],v=t("input",{type:"hidden",name:"start_time",value:"00:00:00"},null,-1),b=t("input",{type:"hidden",name:"end_time",value:"00:00:00"},null,-1),g=["value"],I=["value"],E=t("input",{type:"hidden",name:"hid_stage_id"},null,-1),x=t("input",{type:"hidden",name:"form_name",value:"relationship_form"},null,-1),R=["value"],w=t("button",{type:"button",class:"close","data-dismiss":"alert"},"x",-1),S=t("strong",null," Relationship data saved successfully! ",-1),B=t("span",{id:"text"},null,-1),F=[w,S,B],N=["innerHTML"],k=t("button",{type:"button",class:"close","data-dismiss":"alert"},"x",-1),q=t("strong",null," Relationship data saved successfully! ",-1),A=t("span",{id:"text"},null,-1),T=[k,q,A],D={class:"card-footer"},M={class:"mc-footer"},Q={class:"row"},H={class:"col-lg-12 text-right"},L=["disabled"];function z(s,n,e,C,i,a){return m(),u("div",h,[t("form",{id:"relationship_form",name:"relationship_form",onSubmit:n[0]||(n[0]=c((...r)=>a.submitRelationshipForm&&a.submitRelationshipForm(...r),["prevent"]))},[t("div",p,[f,t("input",{type:"hidden",name:"patient_id",value:e.patientId},null,8,y),v,b,t("input",{type:"hidden",name:"module_id",value:e.moduleId},null,8,g),t("input",{type:"hidden",name:"component_id",value:e.componentId},null,8,I),E,x,t("input",{type:"hidden",name:"timearr[form_start_time]",class:"timearr form_start_time",value:i.time},null,8,R),t("div",{class:"alert alert-success",style:l({display:i.showAlert?"block":"none"})},F,4),t("div",{innerHTML:i.RelationshipQuestionnaire},null,8,N),t("div",{class:"alert alert-success",id:"success-alert",style:l({display:i.showAlert?"block":"none"})},T,4)]),t("div",D,[t("div",M,[t("div",Q,[t("div",H,[t("button",{type:"submit",id:"save-question",class:"btn btn-primary m-1",disabled:i.timerStatus==1},"Next",8,L)])])])])],32)])}const O=d(_,[["render",z]]);export{O as default};
