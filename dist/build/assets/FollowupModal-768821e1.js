import{_ as E,l,H as C,m as x,r as T,o as D,e as N,b as t,n as I,q as S,f as B,t as g,i as L,M as U,F as A,d as k}from"./appInertia-bd981cc7.js";import"./AgGridTable.vue_vue_type_style_index_0_lang-56c71005.js";const q={props:{patientId:Number,moduleId:Number,componentId:Number,stageId:Number,followupCallFunction:{type:Function,required:!0}},setup(r){let o=l(null);const i=l(""),e=l(""),p=l(null),f=l(""),m=l(0),a=l([]),v=l(!1),_=l(!1),h=l({}),w=l(""),b=l(r.stageId);C(()=>r.stageId,n=>{b.value=n});const M=n=>{const d=n.split(" ")[0].split("-");return`${d[2]}-${d[0]}-${d[1]}`},F=(n,d)=>{v.value=!0,o.value=document.getElementById("page_landing_times").value,$.isNumeric(n)==!0?k({method:"GET",url:`/ccm/getFollowupListData-edit/${n}/${d}/followupnotespopulate`}).then(function(c){const u=c.data.followup_task_edit_notes[0];console.log(c.data),u?(w.value=u.id,e.value=u.task_notes,p.value=u.select_task_category,f.value=M(u.task_date),i.value=u.notes,m.value=u.status_flag===1?1:0):console.error("Empty response array")}).catch(function(c){console.error(c,c.response)}):y()},y=()=>{v.value=!1};return x(async()=>{try{o.value=document.getElementById("page_landing_times").value,console.log(o,"time followup")}catch(n){console.error("Error on page load:",n)}}),{followupEditId:w,followupTime:o,submitFormModal:async()=>{_.value=!0;let n=document.getElementById("followup_task_edit_notes"),d=new FormData(n);k.defaults.headers.common["X-CSRF-TOKEN"]=document.querySelector('meta[name="csrf-token"]').content;try{const s=await k.post("/ccm/saveFollowupListData-edit",d);s&&s.status==200&&(r.followupCallFunction(),$("#followUpAlert").html('<div class="alert alert-success"> Data Saved Successfully </div>'),updateTimer(r.patientId,"1",r.moduleId),$(".form_start_time").val(s.data.form_start_time),o.value=s.data.form_start_time,setTimeout(function(){$("#followUpAlert").html("")},2e3)),setTimeout(function(){y()},3e3),_.value=!1}catch(s){_.value=!1,s.response&&s.response.status===422?(h.value=s.response.data.errors,console.log(s.response.data.errors),setTimeout(function(){h.value={}},3e3)):($("#followUpAlert").html('<div class="alert alert-danger">Error: Couldnt process your request. Please try again later.</div>'),console.error("Error submitting form:",s),setTimeout(function(){$("#followUpAlert").html("")},3e3))}},status_flag:m,notes:i,task_notes:e,category:p,task_date:f,isOpen:v,openModal:F,closeModal:y,Deactivations:a,isLoading:_,formErrors:h,stageId:b}}},O={class:"modal-content followup-modal-content"},V={class:"modal-header"},P=t("h4",{class:"modal-title"},"Modify Followup Task",-1),z={class:"modal-body",style:{"padding-top":"10px"},id:"followup_task_edit_notes"},G=t("div",{id:"followUpAlert"},null,-1),H=["value"],K=["value"],R=t("input",{type:"hidden",name:"start_time",value:"00:00:00"},null,-1),X=t("input",{type:"hidden",name:"end_time",value:"00:00:00"},null,-1),j=["value"],J=["value"],Q=t("input",{type:"hidden",name:"form_name",value:"followup_task_edit_notes"},null,-1),W=["value"],Y=["value"],Z=["value"],tt=t("b",null,"Task : ",-1),et={id:"task_notes"},ot=t("b",null,"Category : ",-1),lt={id:"category"},at=["value"],st={id:"notes",name:"notes",class:"forms-element form-control"},nt={class:"form-group col-md-12 mt-2"},it={class:"forms-element checkbox checkbox-outline-primary"},dt=t("span",null,"Mark as completed",-1),ut=t("span",{class:"checkmark"},null,-1),rt={class:"modal-footer"},ct=t("button",{type:"submit",class:"btn btn-primary"},"Save",-1);function mt(r,o,i,e,p,f){const m=T("loading-spinner");return D(),N(A,null,[t("div",{class:I(["overlay",{open:e.isOpen}]),onClick:o[0]||(o[0]=(...a)=>e.closeModal&&e.closeModal(...a))},null,2),t("div",{class:I(["modal fade",{open:e.isOpen}])},[t("div",O,[t("form",{name:"followup_task_edit_notes",id:"followup_task_edit_notes",onSubmit:o[4]||(o[4]=S((...a)=>e.submitFormModal&&e.submitFormModal(...a),["prevent"]))},[t("div",V,[P,t("button",{type:"button",class:"close",onClick:o[1]||(o[1]=(...a)=>e.closeModal&&e.closeModal(...a))},"Ã—")]),t("div",z,[G,B(m,{isLoading:e.isLoading},null,8,["isLoading"]),t("input",{type:"hidden",name:"patient_id",id:"patientid",value:i.patientId},null,8,H),t("input",{type:"hidden",name:"uid",id:"patientid",value:i.patientId},null,8,K),R,X,t("input",{type:"hidden",name:"module_id",value:i.moduleId},null,8,j),t("input",{type:"hidden",name:"component_id",value:i.componentId},null,8,J),Q,t("input",{type:"hidden",name:"stage_id",value:e.stageId},null,8,W),t("input",{type:"hidden",name:"id",id:"hiden_idhiden_id",value:e.followupEditId},null,8,Y),t("input",{type:"hidden",name:"timearr[form_start_time]",class:"timearr form_start_time",value:e.followupTime},null,8,Z),t("p",null,[tt,t("span",et,g(e.task_notes),1)]),t("p",null,[ot,t("span",lt,g(e.category),1)]),t("p",null,[t("input",{type:"date",name:"task_date",id:"task_date_val",value:e.task_date},null,8,at)]),t("textarea",st,g(e.notes),1),t("div",nt,[t("label",it,[L(t("input",{type:"checkbox",id:"status_flag",name:"status_flag","onUpdate:modelValue":o[2]||(o[2]=a=>e.status_flag=a),"true-value":"1","false-value":"0"},null,512),[[U,e.status_flag]]),dt,ut])])]),t("div",rt,[ct,t("button",{type:"button",class:"btn btn-default float-left","data-dismiss":"modal",onClick:o[3]||(o[3]=(...a)=>e.closeModal&&e.closeModal(...a))},"Close")])],32)])],2)],64)}const vt=E(q,[["render",mt]]);export{vt as default};
