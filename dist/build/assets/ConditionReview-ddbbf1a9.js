import f from"./PreparationFollowUpForm-3902f3cd.js";import{_ as g,l as m,G as y,m as N,r as I,o as w,e as b,b as e,i as p,s as E,R as v,f as R,q as S,d as u}from"./appInertia-bd981cc7.js";import"./AgGridTable.vue_vue_type_style_index_0_lang-56c71005.js";import"./Medication-2ef524d9.js";import"./AgGridTable-ef5374d2.js";import"./Allergies-1123cab4.js";import"./Drug-b2af5b6a.js";import"./AllergiesShortForm-5982317e.js";import"./Food-ea511f68.js";import"./Enviromental-9c6f54ac.js";import"./Insect-13b0c900.js";import"./Latex-715d0018.js";import"./Pet_related-7f817fbf.js";import"./other-a5eef38d.js";import"./ReviewCarePlanModal-8980f276.js";import"./Services-b1b6ac09.js";import"./DME-b838ddab.js";import"./ServicesShortForm-ca43d840.js";import"./HomeHealth-b8ee4c3e.js";import"./ServicesLongForm-7de45d04.js";import"./Dialysis-d9881b2b.js";import"./Therapy-4718bf0c.js";import"./SocialServices-39ac1892.js";import"./MedicalSupplies-4c62d14e.js";import"./Other-bc11f1dc.js";import"./Call-a43c5754.js";import"./CallHistory-484a964a.js";import"./TextMessage-9cf25f50.js";import"./ContactTime-418bf844.js";import"./VitalsHealthData-3c361979.js";import"./Vitals-ec8cf805.js";import"./Labs-ee4ce4bc.js";import"./moment-fbc5633a.js";import"./Imaging-72b0635a.js";import"./HealthData-d540fb84.js";const k={props:{sectionName:String,patientId:Number,moduleId:Number,componentId:Number},components:{PreparationForm:f},setup(n){const i="research_follow_up";let a=m(),t=m();const s=m(!1);let d=m(),l=m(0);const r=async()=>{s.value=!0;try{let o=document.getElementById(`${i}_preparation_followup_form`),_=new FormData(o);u.defaults.headers.common["X-CSRF-TOKEN"]=document.querySelector('meta[name="csrf-token"]').content;const c=await u.post("/ccm/monthly-monitoring-call-preparation-form",_);c&&c.status==200&&($("#conditionpreparationAlert").html('<div class="alert alert-success" id="success-alert"><strong>Call Preparation Completed! </strong> </div>'),updateTimer(n.patientId,"1",n.moduleId),$(".form_start_time").val(c.data.form_start_time),a.value=document.getElementById("page_landing_times").value,setTimeout(function(){$("#conditionpreparationAlert").html("")},3e3)),s.value=!1,this.$emit("form-submitted")}catch(o){o.response&&o.response.status===422?(d.value=o.response.data.errors,setTimeout(function(){d.value={}},3e3),console.log(d)):($("#conditionpreparationAlert").html('<div class="alert alert-danger">Error: Something Went wrong! Please try Again.</div>'),console.error("Error submitting form:",o),setTimeout(function(){$("#conditionpreparationAlert").html("")},3e3)),s.value=!1}};let h=async()=>{try{let o="Condition_Review",_=await u.get(`/get_stage_id/${n.moduleId}/${n.componentId}/${o}`);l.value=_.data.stageID}catch(o){console.error("Error fetching condition review stageID:",o)}};return y(async()=>{await h()}),N(async()=>{try{a.value=document.getElementById("page_landing_times").value,t.value=document.getElementById("timer_runing_status").value}catch(o){console.error("Error on page load:",o)}}),{sectionName:i,preparationTime:a,submitResearchFollowForm:r,isLoading:s,formErrors:d,conditionReviewStageID:l,timerStatus:t}}},F=["id","name"],C={class:"row call mb-4"},B={class:"col-lg-12 mb-4"},D={class:"card"},T={class:"card-body"},O=e("div",{class:"card-title"},"Condition Review",-1),Y=e("div",{id:"conditionpreparationAlert"},null,-1),A={class:"form-row mb-4"},M=["value"],P=["value"],V=["value"],U=["value"],q=e("input",{type:"hidden",name:"start_time",value:"00:00:00"},null,-1),x=e("input",{type:"hidden",name:"end_time",value:"00:00:00"},null,-1),G=["name","value"],K=["value"],L=["value"],W=e("input",{type:"hidden",name:"step_id",value:"0"},null,-1),X=["value"],j={class:"col-md-12 forms-element"},z=e("span",{class:"mr-3 mb-4"},[e("b",null,"Call preparation completed?")],-1),H={class:"mr-3 d-inline-flex align-self-center"},J={for:"_data_present_in_emr_yes",class:"radio radio-primary mr-3"},Q=["id","checked"],Z=e("span",null,"Yes",-1),ee=e("span",{class:"checkmark"},null,-1),te={for:"_data_present_in_emr_no",class:"radio radio-primary mr-3"},oe=["id","checked"],ne=e("span",null,"No",-1),ie=e("span",{class:"checkmark"},null,-1),ae=e("div",{class:"invalid-feedback"},"office visit",-1),re={id:"data_present_in_emr_show"},se={class:"card-footer"},de={class:"mc-footer"},me={class:"row"},le={class:"col-lg-12 text-right"},_e=["disabled"];function ce(n,i,a,t,s,d){const l=I("PreparationForm");return w(),b("form",{id:`${t.sectionName}_preparation_followup_form`,name:`${t.sectionName}_preparation_followup_form`,onSubmit:i[3]||(i[3]=S((...r)=>t.submitResearchFollowForm&&t.submitResearchFollowForm(...r),["prevent"]))},[e("div",C,[e("div",B,[e("div",D,[e("div",T,[O,Y,e("div",A,[e("input",{type:"hidden",name:"uid",value:a.patientId},null,8,M),e("input",{type:"hidden",name:"patient_id",value:a.patientId},null,8,P),e("input",{type:"hidden",name:"module_id",value:a.moduleId},null,8,V),e("input",{type:"hidden",name:"component_id",value:a.componentId},null,8,U),q,x,p(e("input",{type:"hidden",name:t.sectionName,value:t.sectionName,"onUpdate:modelValue":i[0]||(i[0]=r=>t.sectionName=r)},null,8,G),[[E,t.sectionName]]),e("input",{type:"hidden",name:"form_name",value:`${t.sectionName}_preparation_followup_form`},null,8,K),e("input",{type:"hidden",name:"stage_id",value:t.conditionReviewStageID},null,8,L),W,e("input",{type:"hidden",name:"timearr[form_start_time]",class:"timearr form_start_time",value:t.preparationTime},null,8,X),e("div",j,[z,e("div",H,[e("label",J,[p(e("input",{type:"radio",formControlName:"radio",name:"data_present_in_emr",id:`${t.sectionName}_data_present_in_emr_yes`,"onUpdate:modelValue":i[1]||(i[1]=r=>n.data_present_in_emrYesNO=r),checked:n.data_present_in_emrYesNO=="1",value:"1"},null,8,Q),[[v,n.data_present_in_emrYesNO]]),Z,ee]),e("label",te,[p(e("input",{type:"radio",formControlName:"radio",name:"data_present_in_emr",id:`${t.sectionName}_data_present_in_emr_no`,"onUpdate:modelValue":i[2]||(i[2]=r=>n.data_present_in_emrYesNO=r),checked:n.data_present_in_emrYesNO=="0",value:"0"},null,8,oe),[[v,n.data_present_in_emrYesNO]]),ne,ie])])]),ae]),e("div",re,[R(l,{sectionName:t.sectionName,patientId:a.patientId,moduleId:a.moduleId,componentId:a.componentId,formErrors:t.formErrors},null,8,["sectionName","patientId","moduleId","componentId","formErrors"])])]),e("div",se,[e("div",de,[e("div",me,[e("div",le,[e("button",{type:"submit",class:"btn btn-primary m-1 save_preparation",id:"_save",disabled:t.timerStatus==1},"Next",8,_e)])])])])])])])],40,F)}const ze=g(k,[["render",ce]]);export{ze as default};
