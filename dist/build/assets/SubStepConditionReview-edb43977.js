import{_ as k,d as r,r as w,o as _,e as u,b as e,i as J,v as M,t as m,F as E,j as T,c as D,h as v,q as A,I as F,k as S,N as x,n as j}from"./appInertia-bd981cc7.js";import L from"./Calender-637c5389.js";import B from"./ReviewTable-38158eaa.js";import"./AgGridTable.vue_vue_type_style_index_0_lang-56c71005.js";import"./AgGridTable-ef5374d2.js";const P={props:{patientId:Number,moduleId:Number,componentId:Number},components:{Calendervue:L,ReviewTable:B},data(){return{navLink:"nav-link",ddDays:30,day:null,reading:null,text_alert:null,percentage:null,stageId:0,reviewReadingStepId:null,reviewNotesStepId:null,reviewDataStepId:null,devicelist:null,selectedMonthYear:null,deviceID:0,formErrors:{},changedevice:!1,toshowTable:!1,fromDate:null,toDate:null,notes:null,timerStatus:null}},mounted(){const t=document.createElement("script");t.src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.18.1/moment.min.js",t.async=!0,document.body.appendChild(t),this.time=document.getElementById("page_landing_times").value,this.timerStatus=document.getElementById("timer_runing_status").value,this.setdata(30),this.getStageID(),this.getDevice()},methods:{async getDevice(){await r.get(`/ccm/get_device_list/${this.patientId}/device_list`).then(t=>{this.devicelist=t.data.content,this.deviceID=t.data.deviceID,this.changedevice=!0,this.selectedMonthYear=$("#calender").find(".fc-toolbar-title").html()}).catch(t=>{console.error("Error fetching data:",t)})},async ajexChart(){this.toshowTable=!1;var t=$("#calender").find(".fc-toolbar-title").html();this.selectedMonthYear=t;var a=moment().month(t).format("M"),i=t.split(" "),o=i[1];await r.get(`/rpm/graphreadingnew-chart/${this.patientId}/${this.deviceID}/${a}/${o}/graphchart`).then(s=>{this.changedevice=!0,this.getChartOnclick(s.data,"container1",this.deviceID)}).catch(s=>{console.error("Error fetching data:",s)})},async getStageID(){try{let t="Review_RPM",a=await r.get(`/get_stage_id/${this.moduleId}/${this.componentId}/${t}`);this.stageId=a.data.stageID;let i="Review-Rpm-Reading",o="Review-Rpm-Caremanager-Notes",s="Review-Rpm-DataList",d=await r.get(`/get_step_id/${this.moduleId}/${this.componentId}/${this.stageId}/${i}`),c=await r.get(`/get_step_id/${this.moduleId}/${this.componentId}/${this.stageId}/${o}`),l=await r.get(`/get_step_id/${this.moduleId}/${this.componentId}/${this.stageId}/${s}`);this.reviewReadingStepId=d.data.stepID,this.reviewNotesStepId=c.data.stepID,this.reviewDataStepId=l.data.stepID;let n=await r.get(`/ccm/get_revew_notes/${this.patientId}`);this.notes=n.data.trim(),$("#preloader").hide()}catch{throw new Error("Failed to fetch stageID")}},async setdata(t){let a=await r.get(`/rpm/getNumberOfReading/${t}/${this.patientId}`);this.day=t,this.reading=a.data.readingcnt,this.text_alert=a.data.alertcnt;var i=a.data.readingcnt*t/100,o=i.toFixed(2);this.percentage=o},async submitRpmReviewForm(){let t=document.getElementById("rpm_review_form"),a=new FormData(t);this.renderComponent=!1,r.defaults.headers.common["X-CSRF-TOKEN"]=document.querySelector('meta[name="csrf-token"]').content;try{this.formErrors={};const i=await r.post("/rpm/save-rpm-review-notes",a);i&&i.status==200&&(this.renderComponent=!0,this.showAlert=!0,updateTimer(this.patientId,1,this.moduleId),$(".form_start_time").val(i.data.form_start_time),setTimeout(()=>{this.time=document.getElementById("page_landing_times").value,this.showAlert=!1},3e3))}catch(i){i.response&&i.response.status===422?this.formErrors=i.response.data.errors:console.error("Error submitting form:",i)}},async tabChange(t){this.deviceID=t,(new Date().getMonth()+1).toString().padStart(2,"0"),new Date().getFullYear();var a=$("#calender").find(".fc-toolbar-title").html();a!=null&&(this.changedevice=!1,this.ajexChart())},async SerchReviewData(){this.toshowTable=!1,this.fromDate=$("#fromdate").val(),this.toDate=$("#todate").val();let t="observationsbp";await r.get(`/rpm/patient-alert-history-list-device-link/${this.patientId}/${t}/${this.fromDate}/${this.toDate}`).then(a=>{this.toshowTable=!0}).catch(a=>{console.error("Error fetching data:",a)})},async dataList(){var t={January:1,February:2,March:3,April:4,May:5,June:6,July:7,August:8,September:9,October:10,November:11,December:12},a=this.selectedMonthYear,i=a.split(" "),o=t[i[0]],s="";o<10?s="0"+o:s=o;var d=i[1],c=d+"-"+s+"-01",l=new Date(d,s,1,0),n=new Date(l).toISOString(),h=n.split("T"),p=h[0];this.fromDate=c,this.toDate=p,$("#address_btn").html('<button type="button" class="btn btn-primary mt-4 month-reset" id="Addressed"  >Addressed</button>'),this.toshowTable=!0},async getChartOnclick(t,a,i){var o=JSON.parse(JSON.stringify(t.uniArray)),s=JSON.parse(JSON.stringify(t.arrayreading)),d=JSON.parse(JSON.stringify(t.label)),c=JSON.parse(JSON.stringify(t.arrayreading1)),l=JSON.parse(JSON.stringify(t.label1)),n=JSON.stringify(t.arrayreading_min),h=JSON.parse(n),p=JSON.stringify(t.arrayreading_max),y=JSON.parse(p),N=JSON.stringify(t.arrayreading_min1),g=JSON.parse(N),R=JSON.stringify(t.arrayreading_max1),b=JSON.parse(R),C=JSON.parse(JSON.stringify(t.title_name));if(i==3)var f=" / <b>"+l+"</b> - [Max:"+b+" ]/[Min: "+g+"]";else var f="";var O="<b>"+d+"</b> - [Min:"+h+" ]/[Max: "+y+"]";Highcharts.chart(a,{chart:{type:"spline",events:{load:function(){this.series.forEach(function(I){I.update({showInLegend:I.points.length})})}}},xAxis:{categories:o,crosshair:!0,index:1,gridLineWidth:1},title:{text:C},subtitle:{text:O+" "+f},yAxis:{title:{text:"Readings"},min:0,minorGridLineWidth:0,alternateGridColor:null,plotBands:[{from:h,to:y,color:"rgba(68, 170, 213, 0.1)"},{from:g,to:b,color:"rgba(243, 248, 157, 1)"}]},tooltip:{shared:!0,crosshairs:!0},plotOptions:{spline:{lineWidth:4,states:{hover:{lineWidth:5}},marker:{enabled:!0}}},series:[{name:d,data:s},{name:l,data:c}],navigation:{menuItemStyle:{fontSize:"10px"}}})}}},Y={class:"row mb-4"},V={class:"col-md-12"},z={class:"card"},W={class:"card-header"},q={class:"form-row"},G={class:"col-md-4"},H=e("option",{value:"30",selected:""}," 30 days",-1),K=e("option",{value:"60"}," 60 days",-1),U=e("option",{value:"90"}," 90 days",-1),X=[H,K,U],Q=e("span",{class:"col-md-8",style:{"padding-right":"30%"}},null,-1),Z={class:"card-body"},ee={class:"row"},te=e("div",{class:"col-md-12",id:"time_add_success_msg"},null,-1),se=e("div",{id:"success"},null,-1),ie={class:"col-md-12 steps_section"},ae={class:"title"},ne=["value"],de=["value"],oe=["value"],re=["value"],le=["value"],ce=e("input",{type:"hidden",name:"form_name",value:"rpm_review_form"},null,-1),_e=e("h5",{class:"text-center card-title"},"RPM Readings",-1),me={class:"align-self-start pt-3"},he={class:"d-flex justify-content-center"},ue={class:"mr-2",style:{}},ve={class:"card"},pe=e("div",{class:"card-header device_header"},"Number of days",-1),ye={class:"card-body device_box"},ge={id:"txt_day",class:"day"},be={class:"mr-2",style:{}},fe={class:"card"},Ie=e("div",{class:"card-header device_header"},"Number of Readings",-1),we={class:"card-body device_box"},De={id:"txt_reading",class:"day"},Se={class:"mr-2",style:{}},xe={class:"card"},Ne=e("div",{class:"card-header device_header"},"% Participation",-1),Re={class:"card-body device_box"},Ce={id:"showpercentage",class:"day"},Oe=e("span",{class:"day"},"%",-1),ke={class:"rounded",style:{}},Je={class:"card"},Me=e("div",{class:"card-header device_header"},"Number of Alerts",-1),Ee={class:"card-body device_box"},Te={id:"txt_alert",class:"day"},Ae=e("hr",null,null,-1),Fe={class:"nav nav-tabs",id:"patientdevicetab",role:"tablist"},je={class:"nav-item"},Le=["onClick"],Be=e("i",{class:"nav-icon color-icon i-Control-2 mr-1"},null,-1),Pe=["value"],Ye={class:"row mt-4"},Ve={class:"col"},ze={class:"card"},We=["value"],qe=e("div",{class:"col"},[e("div",{class:"card"},[e("div",{class:"card-body device_box"},[e("div",{id:"container1",style:{height:"400px",width:"100%"}})])])],-1),Ge={id:"hd_tbl"},He=e("hr",null,null,-1),Ke={key:0,class:"form-row"},Ue={class:"col-md-2 form-group mb-2"},Xe=e("label",{for:"date"},"From Date",-1),Qe=["value"],Ze={class:"col-md-2 form-group mb-3"},$e=e("label",{for:"date"},"To Date",-1),et=["value"],tt=e("button",{type:"button",id:"resetbutton",class:"btn btn-primary mt-4",style:{"margin-left":"10px"}},"Reset",-1),st=e("div",{class:"col-md-2 text-right",id:"address_btn"},null,-1),it=e("hr",null,null,-1),at={class:"card"},nt=["value"],dt=["value"],ot=e("input",{type:"hidden",name:"start_time",value:"00:00:00"},null,-1),rt=e("input",{type:"hidden",name:"end_time",value:"00:00:00"},null,-1),lt=["value"],ct=["value"],_t=["value"],mt=["value"],ht=e("input",{type:"hidden",name:"form_name",id:"rpm_review_form",value:"rpm_review_form"},null,-1),ut=["value"],vt=["value"],pt=e("div",{id:"success"},null,-1),yt={class:"row justify-content-center"},gt={class:"col-md-12"},bt={class:"form-group"},ft={class:"card-body"},It=e("button",{type:"button",class:"close","data-dismiss":"alert"},"x",-1),wt=e("strong",null,"Review Note saved successfully! ",-1),Dt=e("span",{id:"text"},null,-1),St=[It,wt,Dt],xt=e("label",null,"Care Manager Notes",-1),Nt={name:"notes",class:"form-control forms-element notes_class"},Rt={key:0,class:"invalid-feedback",style:{display:"block"}},Ct={class:"card-footer"},Ot=["disabled"],kt=e("hr",null,null,-1),Jt={class:"modal fade",id:"rpm_cm_modal","aria-hidden":"true"},Mt={class:"modal-dialog modal-lg",style:{width:"800px!important","margin-left":"280px"}},Et={class:"modal-content"},Tt=e("div",{class:"modal-header"},[e("h4",{class:"modal-title"},"Care Manager Notes"),e("button",{type:"button",class:"close modalcancel","data-dismiss":"modal"},"Ã—")],-1),At={class:"modal-body"},Ft={action:"",name:"rpm_cm_form",id:"rpm_cm_form",method:"POST",class:"form-horizontal"},jt={class:"row"},Lt={class:"col-md-12 form-group mb-3"},Bt=x('<input type="hidden" name="hd_timer_start" id="hd_timer_start"><input type="hidden" name="rpm_observation_id_bp" id="rpm_observation_id_bp"><input type="hidden" name="rpm_observation_id_hr" id="rpm_observation_id_hr"><input type="hidden" name="care_patient_id" id="care_patient_id"><input type="hidden" name="p_id" id="p_id"><input type="hidden" name="csseffdate" id="csseffdate">',6),Pt=["value"],Yt=["value"],Vt=e("input",{type:"hidden",name:"table",id:"table"},null,-1),zt=e("input",{type:"hidden",name:"formname",id:"formname"},null,-1),Wt=e("input",{type:"hidden",name:"form_name",id:"form_name",value:"rpm_cm_form"},null,-1),qt=["value"],Gt=["value"],Ht=x('<input type="hidden" name="hd_chk_this" id="hd_chk_this"><input type="hidden" name="device_id" id="device_id"><input type="hidden" name="rpm_unit_bp" id="rpm_unit_bp"><input type="hidden" name="rpm_unit_hr" id="rpm_unit_hr"><label for="Notes">Notes<span style="color:red;">*</span></label><div class="forms-element"></div><div class="invalid-feedback"></div>',7),Kt={class:"card-footer"},Ut={class:"mc-footer"},Xt={class:"row"},Qt={class:"col-lg-12 text-right"},Zt=["disabled"],$t=e("button",{type:"button",class:"btn btn-outline-secondary m-1 modalcancel","data-dismiss":"modal"},"Cancel",-1);function es(t,a,i,o,s,d){const c=w("Calendervue"),l=w("ReviewTable");return _(),u("div",Y,[e("div",V,[e("div",z,[e("div",W,[e("div",q,[e("span",G,[J(e("select",{class:"custom-select show-tick",onChange:a[0]||(a[0]=n=>d.setdata(s.ddDays)),id:"ddl_days","onUpdate:modelValue":a[1]||(a[1]=n=>s.ddDays=n)},X,544),[[M,s.ddDays]])]),Q])]),e("div",Z,[e("div",ee,[te,se,e("div",ie,[e("div",ae,[e("input",{type:"hidden",value:i.patientId},null,8,ne),e("input",{type:"hidden",name:"module_id",value:i.moduleId},null,8,de),e("input",{type:"hidden",name:"sub_module_id",value:i.componentId},null,8,oe),e("input",{type:"hidden",name:"stage_id",value:t.stageID},null,8,re),e("input",{type:"hidden",name:"step_id",value:s.reviewReadingStepId},null,8,le),ce,_e])])]),e("div",me,[e("div",he,[e("div",ue,[e("div",ve,[pe,e("div",ye,[e("span",ge,m(s.day),1)])])]),e("div",be,[e("div",fe,[Ie,e("div",we,[e("span",De,m(s.reading),1)])])]),e("div",Se,[e("div",xe,[Ne,e("div",Re,[e("span",Ce,m(s.percentage),1),Oe])])]),e("div",ke,[e("div",Je,[Me,e("div",Ee,[e("span",Te,m(s.text_alert),1)])])])])]),Ae,e("ul",Fe,[(_(!0),u(E,null,T(s.devicelist,n=>(_(),u("li",je,[e("a",{class:j([{active:s.deviceID==n.id},"nav-link"]),onClick:h=>d.tabChange(n.id),id:"device-icon-tab_","data-toggle":"tab",href:"#deviceid_",role:"tab","aria-controls":"ccm-call","aria-selected":"false"},[Be,S(m(n.device_name),1)],10,Le)]))),256))]),e("input",{type:"hidden",id:"hd_deviceid",value:s.deviceID},null,8,Pe),e("div",Ye,[e("div",Ve,[e("div",ze,[e("input",{type:"hidden",name:"cald-hid",id:"cald-hid",value:s.selectedMonthYear},null,8,We),s.changedevice?(_(),D(c,{key:0,patientId:i.patientId,deviceID:s.deviceID,onCallParentMethod:d.ajexChart},null,8,["patientId","deviceID","onCallParentMethod"])):v("",!0)])]),e("div",null,[e("button",{type:"button",id:"btn_datalist",onClick:a[2]||(a[2]=(...n)=>d.dataList&&d.dataList(...n)),class:"btn btn-primary"},"Data List")]),qe]),e("div",Ge,[He,s.toshowTable?(_(),u("div",Ke,[e("div",Ue,[Xe,e("input",{id:"fromdate",min:"1901-01-01",max:"2999-12-31",class:"form-control",name:"date",type:"date",value:s.fromDate,autocomplete:"off"},null,8,Qe)]),e("div",Ze,[$e,e("input",{id:"todate",min:"1901-01-01",max:"2999-12-31",class:"form-control",name:"date",type:"date",value:s.toDate,autocomplete:"off"},null,8,et)]),e("div",null,[e("button",{type:"button",id:"searchbutton",class:"btn btn-primary mt-4",onClick:a[3]||(a[3]=(...n)=>d.SerchReviewData&&d.SerchReviewData(...n))},"Search"),tt]),st])):v("",!0),s.toshowTable?(_(),D(l,{key:1,patientId:i.patientId,deviceID:s.deviceID,fromDate:s.fromDate,toDate:s.toDate},null,8,["patientId","deviceID","fromDate","toDate"])):v("",!0)]),it,e("div",at,[e("form",{name:"rpm_review_form",id:"rpm_review_form",onSubmit:a[4]||(a[4]=A((...n)=>d.submitRpmReviewForm&&d.submitRpmReviewForm(...n),["prevent"]))},[e("input",{type:"hidden",name:"uid",value:i.patientId},null,8,nt),e("input",{type:"hidden",name:"patient_id",value:i.patientId},null,8,dt),ot,rt,e("input",{type:"hidden",name:"module_id",value:i.moduleId},null,8,lt),e("input",{type:"hidden",name:"component_id",value:i.componentId},null,8,ct),e("input",{type:"hidden",name:"stage_id",value:t.stageID},null,8,_t),e("input",{type:"hidden",name:"step_id",value:s.reviewNotesStepId},null,8,mt),ht,e("input",{type:"hidden",name:"device_id",id:"device_id",value:s.deviceID},null,8,ut),e("input",{type:"hidden",name:"timearr[form_start_time]",class:"timearr form_start_time",value:t.time},null,8,vt),pt,e("div",yt,[e("div",gt,[e("div",bt,[e("div",ft,[e("div",{class:"alert alert-success",id:"success-alert",style:F({display:t.showAlert?"block":"none"})},St,4),xt,e("textarea",Nt,m(s.notes),1),s.formErrors.notes?(_(),u("div",Rt,m(s.formErrors.notes[0]),1)):v("",!0)])])])]),e("div",Ct,[e("button",{type:"submit",class:"btn btn-primary",disabled:s.timerStatus==1},"Save",8,Ot)])],32)]),kt,e("div",Jt,[e("div",Mt,[e("div",Et,[Tt,e("div",At,[e("form",Ft,[e("div",jt,[e("div",Lt,[Bt,S(),e("input",{type:"hidden",id:"module_id",name:"module_id",value:i.moduleId},null,8,Pt),e("input",{type:"hidden",id:"component_id",name:"component_id",value:i.componentId},null,8,Yt),Vt,zt,Wt,e("input",{type:"hidden",name:"stage_id",id:"stage_id",value:s.stageId},null,8,qt),e("input",{type:"hidden",name:"step_id",id:"step_id",value:s.reviewDataStepId},null,8,Gt),Ht])]),e("div",Kt,[e("div",Ut,[e("div",Xt,[e("div",Qt,[e("button",{type:"submit",dataid:"rpm_cm_form",class:"btn btn-primary m-1",disabled:s.timerStatus==1},"Submit",8,Zt),$t])])])])])])])])])])])])])}const ds=k(P,[["render",es]]);export{ds as default};
