import{_ as S,l as I,d as h,o as u,e as p,b as a,i as f,v as g,F as y,j as q,t as b}from"./appInertia-bd981cc7.js";I(null);const w={props:{patientId:Number,moduleId:Number,componentId:Number},data(){return{questionnaire:null,decisionTree:null,start_time:null,module_id:null,stage_id:null,step:null,timerStatus:null}},mounted(){this.patientEnrolled()},methods:{async patientEnrolled(){await h.get(`/ccm/enrolled/${this.patientId}/${this.moduleId}/${this.componentId}/ccm_enrolled`).then(e=>{this.module_id=e.data.module_id,this.stage_id=e.data.stage_id,this.step=e.data.step,this.fetchQuestionnaireData()}).catch(e=>{console.error("Error fetching data:",e)})},async fetchQuestionnaireData(){await h.get(`/org/stage_code/${this.module_id}/${this.stage_id}/stage_code_list`).then(e=>{this.questionnaire=e.data,this.selectedQuestionnaire=this.step,this.fetchMonthlyQuestion()}).catch(e=>{console.error("Error fetching data:",e)})},async fetchMonthlyQuestion(){await h.get(`/ccm/get-stepquestion/${this.moduleId}/${this.patientId}/${this.selectedQuestionnaire}/${this.componentId}/question_list`).then(e=>{this.decisionTree=e.data,this.start_time=document.getElementById("page_landing_times").value,this.timerStatus=document.getElementById("timer_runing_status").value,this.savedGeneralQuestion()}).catch(e=>{console.error("Error fetching data:",e)})},async savedGeneralQuestion(){await h.get(`/ccm/get-savedQuestion/${this.moduleId}/${this.patientId}/${this.selectedQuestionnaire}/saved_question`).then(e=>{this.timerStatus==1&&(document.getElementById("generalQue"+this.selectedQuestionnaire).disabled=!0);let t=e.data;for(var l=1,i=0;i<t.length;i++){var s=JSON.parse(t[i].template);t[i].template.replace("'","&#39;"),this.checkQuestion(s,l),l++}}).catch(e=>{console.error("Error fetching data:",e)})},checkQuestion(e,t){for(var l=JSON.stringify(e),i=JSON.parse(l),s=1;s<15;s++)if(i.qs.opt.hasOwnProperty(s)){var o=$('input[value="'+i.qs.q.replace(/[\r\n]+/gm,"")+'"]').parents(".mb-4").attr("id");if($("#"+o).find('input:radio[value="'+i.qs.opt[s].val+'"], input:checkbox[value="'+i.qs.opt[s].val+'"]').attr("checked",!0).change(),$("#"+o).find("input[type=text]").attr("id")){var n=$("#"+o).find("input[type=text]").attr("id");$("#"+n).val(i.qs.opt[s].val)}var r=i.qs.opt;this.renderEditquestion(r,s,t)}},renderEditquestion(e,t,l){var i=JSON.stringify(e),s=JSON.parse(i),o="",n=0;s[t].hasOwnProperty("qs")&&Object.keys(s[t].qs).forEach(function(r){s[t].qs[r].hasOwnProperty("opt")&&Object.keys(s[t].qs[r].opt).forEach(function(d){if(s[t].qs[r].opt.hasOwnProperty(d)){var Q=s[t].qs[r].q.replace(/[\r\n]+/gm,""),m=$('input[value="'+Q+'"]').parents(".mb-4").attr("id");if(m!=null){var v=m,x=v.substring(v.indexOf("general_question")+1),c=x;c=c.replace("general_question","").replace("eneral_question","");var _=v.replace("general_question"+c,"");if($("#options"+c+_).find("input[type=text]").attr("id")){var E=$("#options"+c+_).find("input[type=text]").attr("id");$("#"+E).val(s[t].qs[r].opt[d].val)}}$("#"+m).find('input:radio[value="'+s[t].qs[r].opt[d].val+'"], input:checkbox[value="'+s[t].qs[r].opt[d].val+'"]').attr("checked",!0).change(),o=s[t].qs[r].opt,n=d}})}),n!=0&&this.renderEditquestion(o,n,l)}}},O={class:""},N={class:"row",style:{"margin-bottom":"5px"}},M={class:"col-lg-12 mb-3"},k=a("option",{value:""},"Select General Question",-1),G=["value"],B=a("div",{class:"alert alert-success general_success",id:"success-alert",style:{display:"none"}},[a("button",{type:"button",class:"close","data-dismiss":"alert"},"x"),a("strong",null," General question data saved successfully! "),a("span",{id:"text"})],-1),J=["innerHTML"],T=a("div",{class:"alert alert-success general_success",id:"success-alert",style:{display:"none"}},[a("button",{type:"button",class:"close","data-dismiss":"alert"},"x"),a("strong",null," General question data saved successfully! "),a("span",{id:"text"})],-1),D=a("option",{value:""},"Select General Question",-1),P=["value"],L=a("div",{style:{"padding-left":"20px",color:"red","font-size":"13px"}},[a("b",null,"Select additional applicable questions")],-1),z=a("button",{type:"button",class:"btn btn-primary m-1 nexttab",onclick:"nexttab()",style:{display:"none"}},"Next",-1);function C(e,t,l,i,s,o){return u(),p("div",O,[a("div",N,[a("div",M,[f(a("select",{name:"top_stage_code_for_questionnaire",class:"custom-select show-tick select2","onUpdate:modelValue":t[0]||(t[0]=n=>e.selectedQuestionnaire=n),onChange:t[1]||(t[1]=(...n)=>o.fetchMonthlyQuestion&&o.fetchMonthlyQuestion(...n))},[k,(u(!0),p(y,null,q(s.questionnaire,n=>(u(),p("option",{key:n.id,value:n.id},b(n.description),9,G))),128))],544),[[g,e.selectedQuestionnaire]])])]),B,a("div",{innerHTML:s.decisionTree},null,8,J),T,f(a("select",{name:"bottom_stage_code_for_questionnaire",class:"custom-select show-tick select2","onUpdate:modelValue":t[2]||(t[2]=n=>e.selectedQuestionnaire=n),onChange:t[3]||(t[3]=(...n)=>o.fetchMonthlyQuestion&&o.fetchMonthlyQuestion(...n))},[D,(u(!0),p(y,null,q(s.questionnaire,n=>(u(),p("option",{key:n.id,value:n.id},b(n.description),9,P))),128))],544),[[g,e.selectedQuestionnaire]]),L,z])}const H=S(w,[["render",C]]);export{H as default};
