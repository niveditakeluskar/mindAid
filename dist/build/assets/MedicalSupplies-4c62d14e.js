import{_ as M,l as r,H as y,G as B,m as F,r as S,o as x,e as T,b as i,q as A,I as q,f as g,N as b,d as k}from"./appInertia-bd981cc7.js";import P from"./AgGridTable-ef5374d2.js";import R from"./ServicesShortForm-ca43d840.js";import"./AgGridTable.vue_vue_type_style_index_0_lang-56c71005.js";const G={props:{patientId:Number,moduleId:Number,componentId:Number,stageId:Number},components:{MedicalSuppliesForm:R,AgGridTable:P},setup(s){let n=r(!1),d=r(0),l=r(0),u=r(null),m=r([]);const c=r(!1),p=r([]);r(null),r(null),r(null);const v=r([{headerName:"Sr. No.",valueGetter:"node.rowIndex + 1",initialWidth:20},{headerName:"Types",field:"type",filter:!0},{headerName:"Purpose",field:"purpose"},{headerName:"Company Name",field:"specify"},{headerName:"Prescribing Provider",field:"brand"},{headerName:"Last Modified By",field:"users.f_name",cellRenderer:function(t){const e=t.data;return e&&e.users.f_name?e.users.f_name+" "+e.users.l_name:"N/A"}},{headerName:"Last Modified On",field:"updated_at"},{headerName:"Action",field:"action",cellRenderer:function(t){const e=t.data;return e&&e.action?e.action:""}}]),_=async()=>{try{c.value=!0,await new Promise(a=>setTimeout(a,2e3));const t=await fetch(`/ccm/care-plan-development-services-list/${s.patientId}/6`);if(!t.ok)throw new Error("Failed to fetch followup task list");c.value=!1;const e=await t.json();p.value=e.data}catch(t){console.error("Error fetching followup task list:",t),c.value=!1}},w=async()=>{m.value={};let t=document.getElementById("service_medical_supplies_form"),e=new FormData(t),a={};e.forEach((o,D)=>{a[D]=o});try{const o=await saveServices(a);n.value=!0,updateTimer(s.patientId,"1",s.moduleId),$(".form_start_time").val(o.form_start_time),await _(),document.getElementById("service_medical_supplies_form").reset(),setTimeout(()=>{n.value=!1,u.value=document.getElementById("page_landing_times").value},3e3),m.value=[]}catch(o){o.status&&o.status===422?m.value=o.responseJSON.errors:console.error("Error submitting form:",o)}},I=async t=>{try{let e="Service-Social",a=await k.get(`/get_step_id/${s.moduleId}/${s.componentId}/${t}/${e}`);l.value=a.data.stepID}catch{throw new Error("Failed to fetch stageID")}},f=async(t,e)=>{if(window.confirm("Are you sure you want to delete this Service?")){const a={id:t,uid:s.patientId,patient_id:s.patientId,module_id:s.moduleId,component_id:s.componentId,stage_id:s.stageId,step_id:l.value,form_name:"service_medical_supplies_form",billable:1,start_time:"00:00:00",end_time:"00:00:00",form_start_time:document.getElementById("page_landing_times").value};try{const o=await deleteServiceDetails(a);updateTimer(s.patientId,"1",s.moduleId),$(".form_start_time").val(o.form_start_time),await _(),document.getElementById("service_medical_supplies_form").reset(),setTimeout(()=>{u.value=document.getElementById("page_landing_times").value},3e3)}catch(o){console.error("Error deletting record:",o)}}},h=async t=>{try{const e=p.value.find(a=>a.id==t);if(e){const a=document.getElementById("service_medical_supplies_form");a.querySelector("#service_id").value=e.id,a.querySelector("#type").value=e.type,a.querySelector("#purpose").value=e.purpose,a.querySelector("#specify").value=e.specify,a.querySelector("#brand").value=e.brand,a.querySelector("#notes").value=e.notes,a.scrollIntoView({behavior:"smooth"})}}catch(e){console.error("Error editing service:",e)}},E=()=>{window.deleteServices=f},N=()=>{window.editService=h};return y(()=>s.stageId,(t,e)=>{I(t)}),y(()=>n,(t,e)=>{n.value=t}),B(()=>{_()}),F(async()=>{try{u.value=document.getElementById("page_landing_times").value,E(),N()}catch(t){console.error("Error on page load:",t)}}),{loading:c,submitSrvicesForm:w,medicalSuppliesServicesStageId:d,medicalSuppliesServicesStepId:l,formErrors:m,MedicalSuppliesServicesTime:u,showMedicalSuppliesAlert:n,columnDefs:v,medicalSuppliesServiceRowData:p,fetchPatientMedicalSuppliesServiceList:_,deleteServices:f,editService:h}}},V={class:"tab-pane fade show active",id:"medical-supplies-services",role:"tabpanel","aria-labelledby":"medical-supplies-services-icon-pill"},O={class:"card"},j=i("div",{class:"card-header"},[i("h4",null,"Medical Supplies")],-1),L=i("button",{type:"button",class:"close","data-dismiss":"alert"},"x",-1),C=i("strong",null," Medical Supplies Services data saved successfully! ",-1),z=i("span",{id:"text"},null,-1),H=[L,C,z],J={class:"form-row col-md-12"},W=["value"],K=["value"],Q=i("input",{type:"hidden",name:"start_time",value:"00:00:00"},null,-1),U=i("input",{type:"hidden",name:"end_time",value:"00:00:00"},null,-1),X=["value"],Y=["value"],Z=["value"],ee=["value"],te=b('<input type="hidden" name="form_name" value="service_medical_supplies_form"><input type="hidden" name="service_type" value="medical_supplies"><input type="hidden" name="hid" class="hid" value="6"><input type="hidden" name="id" id="service_id"><input type="hidden" name="billable" value="1">',5),ie=["value"],ae=b('<div class="card-footer"><div class="mc-footer"><div class="row"><div class="col-lg-12 text-right"><button type="submit" class="btn btn-primary m-1" id="save_service_medical_supplies_form">Save</button></div></div></div></div><div class="alert alert-danger" id="danger-alert" style="display:none;"><button type="button" class="close" data-dismiss="alert">x</button><strong> Please Fill All mandatory Fields! </strong><span id="text"></span></div>',2),se=i("div",{class:"separator-breadcrumb border-top"},null,-1),le={class:"row"},oe={class:"col-12"};function re(s,n,d,l,u,m){const c=S("MedicalSuppliesForm"),p=S("AgGridTable");return x(),T("div",V,[i("div",O,[j,i("form",{id:"service_medical_supplies_form",name:"service_medical_supplies_form",onSubmit:n[0]||(n[0]=A((...v)=>l.submitSrvicesForm&&l.submitSrvicesForm(...v),["prevent"]))},[i("div",{class:"alert alert-success",style:q({display:l.showMedicalSuppliesAlert?"block":"none"})},H,4),i("div",J,[i("input",{type:"hidden",name:"uid",value:d.patientId},null,8,W),i("input",{type:"hidden",name:"patient_id",value:d.patientId},null,8,K),Q,U,i("input",{type:"hidden",name:"module_id",value:d.moduleId},null,8,X),i("input",{type:"hidden",name:"component_id",value:d.componentId},null,8,Y),i("input",{type:"hidden",name:"stage_id",value:l.medicalSuppliesServicesStageId},null,8,Z),i("input",{type:"hidden",name:"step_id",value:l.medicalSuppliesServicesStepId},null,8,ee),te,i("input",{type:"hidden",name:"timearr[form_start_time]",class:"timearr form_start_time",value:l.MedicalSuppliesServicesTime},null,8,ie),g(c,{formErrors:l.formErrors},null,8,["formErrors"])]),ae],32),se,i("div",le,[i("div",oe,[g(p,{rowData:l.medicalSuppliesServiceRowData,columnDefs:l.columnDefs},null,8,["rowData","columnDefs"])])])])])}const me=M(G,[["render",re]]);export{me as default};
