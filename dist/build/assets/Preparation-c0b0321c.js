import v from"./PreparationFollowUpForm-3902f3cd.js";import{_ as h,l as d,m as g,r as _,o as y,e as b,f,b as t,i as I,s as E,q as S,F,d as c}from"./appInertia-bd981cc7.js";import"./AgGridTable.vue_vue_type_style_index_0_lang-56c71005.js";import"./Medication-2ef524d9.js";import"./AgGridTable-ef5374d2.js";import"./Allergies-1123cab4.js";import"./Drug-b2af5b6a.js";import"./AllergiesShortForm-5982317e.js";import"./Food-ea511f68.js";import"./Enviromental-9c6f54ac.js";import"./Insect-13b0c900.js";import"./Latex-715d0018.js";import"./Pet_related-7f817fbf.js";import"./other-a5eef38d.js";import"./ReviewCarePlanModal-8980f276.js";import"./Services-b1b6ac09.js";import"./DME-b838ddab.js";import"./ServicesShortForm-ca43d840.js";import"./HomeHealth-b8ee4c3e.js";import"./ServicesLongForm-7de45d04.js";import"./Dialysis-d9881b2b.js";import"./Therapy-4718bf0c.js";import"./SocialServices-39ac1892.js";import"./MedicalSupplies-4c62d14e.js";import"./Other-bc11f1dc.js";import"./Call-a43c5754.js";import"./CallHistory-484a964a.js";import"./TextMessage-9cf25f50.js";import"./ContactTime-418bf844.js";import"./VitalsHealthData-3c361979.js";import"./Vitals-ec8cf805.js";import"./Labs-ee4ce4bc.js";import"./moment-fbc5633a.js";import"./Imaging-72b0635a.js";import"./HealthData-d540fb84.js";const P={props:{patientId:Number,moduleId:Number,componentId:Number,stageid:Number},data(){return{sectionName:"call_preparation",csrfToken:document.querySelector('meta[name="csrf-token"]').getAttribute("content"),validationErrors:{}}},components:{PreparationForm:v},setup(l){const o=d(!1);let a=d(),n=d(),r=d();g(async()=>{try{a.value=document.getElementById("page_landing_times").value;const e=document.getElementById("timer_runing_status");e!==null&&(n.value=e.value)}catch(e){console.error("Error on page load:",e)}});const u=async()=>{try{o.value=!0;let e=document.getElementById("call_preparation_preparation_followup_form"),m=new FormData(e);c.defaults.headers.common["X-CSRF-TOKEN"]=document.querySelector('meta[name="csrf-token"]').content;const i=await c.post("/ccm/monthly-monitoring-call-preparation-form-draft",m);i&&i.status==200&&($("#preparationAlert").html('<div class="alert alert-success" id="success-alert"><strong>Call Preparation Draft Saved Successfully! </strong> </div>'),updateTimer(l.patientId,"1",l.moduleId),$(".form_start_time").val(i.data.form_start_time),a.value=document.getElementById("page_landing_times").value,setTimeout(function(){$("#preparationAlert").html("")},3e3)),o.value=!1,s()}catch(e){e.response&&e.response.status===422?(r.value=e.response.data.errors,setTimeout(function(){r.value={}},3e3),console.log(r)):($("#preparationAlert").html('<div class="alert alert-danger">Error: Something Went wrong! Please try Again.</div>'),console.error("Error submitting form:",e),setTimeout(function(){$("#preparationAlert").html("")},3e3)),o.value=!1}},s=async()=>{document.querySelectorAll(".invalid-feedback").forEach(i=>i.innerHTML=""),document.querySelectorAll(".form-control").forEach(i=>i.classList.remove("is-invalid"))};return{formErrors:r,preparationTime:a,clearValidationErrors:s,callPreparationDraft:u,submitPrepareForm:async()=>{try{o.value=!0;let e=document.getElementById("call_preparation_preparation_followup_form"),m=new FormData(e);c.defaults.headers.common["X-CSRF-TOKEN"]=document.querySelector('meta[name="csrf-token"]').content;const i=await c.post("/ccm/monthly-monitoring-call-preparation-form",m);i&&i.status==200&&($("#preparationAlert").html('<div class="alert alert-success" id="success-alert"><strong>Call Preparation Completed! </strong> </div>'),updateTimer(l.patientId,"1",l.moduleId),$(".form_start_time").val(i.data.form_start_time),a.value=document.getElementById("page_landing_times").value,setTimeout(function(){$("#preparationAlert").html("")},3e3)),o.value=!1}catch(e){e.response&&e.response.status===422?(r.value=e.response.data.errors,setTimeout(function(){r.value={}},3e3),console.log(r)):($("#preparationAlert").html('<div class="alert alert-danger">Error: Something Went wrong! Please try Again.</div>'),console.error("Error submitting form:",e),setTimeout(function(){$("#preparationAlert").html("")},3e3)),o.value=!1}},isLoading:o,timerStatus:n}}},N={class:"row call mb-4"},T={class:"col-lg-12 mb-4"},w={class:"card"},A={class:"card-body"},k=t("div",{id:"preparationAlert"},null,-1),C=t("div",{class:"card-title"},"Call Preparation",-1),D=["value"],B=["value"],q=["value"],x=["value"],L=t("input",{type:"hidden",name:"start_time",value:"00:00:00"},null,-1),M=t("input",{type:"hidden",name:"end_time",value:"00:00:00"},null,-1),V=["name","value"],K=["value"],O=["value"],R=t("input",{type:"hidden",name:"step_id",value:"0"},null,-1),W=["value"],X=["value"],H={class:"card-footer"},U={class:"mc-footer"},j={class:"row"},z={class:"col-lg-12 text-right"},G=["disabled"],J=["disabled"];function Q(l,o,a,n,r,u){const s=_("loading-spinner"),p=_("PreparationForm");return y(),b(F,null,[f(s,{isLoading:n.isLoading},null,8,["isLoading"]),t("form",{id:"call_preparation_preparation_followup_form",onSubmit:o[2]||(o[2]=S((...e)=>n.submitPrepareForm&&n.submitPrepareForm(...e),["prevent"]))},[t("div",N,[t("div",T,[t("div",w,[t("div",A,[k,C,t("input",{type:"hidden",name:"uid",value:a.patientId},null,8,D),t("input",{type:"hidden",name:"patient_id",value:a.patientId},null,8,B),t("input",{type:"hidden",name:"module_id",value:a.moduleId},null,8,q),t("input",{type:"hidden",name:"component_id",value:a.componentId},null,8,x),L,M,I(t("input",{type:"hidden",name:r.sectionName,value:r.sectionName,"onUpdate:modelValue":o[0]||(o[0]=e=>r.sectionName=e)},null,8,V),[[E,r.sectionName]]),t("input",{type:"hidden",name:"form_name",value:l.call_preparation_followup_form},null,8,K),t("input",{type:"hidden",name:"stage_id",value:a.stageid},null,8,O),R,t("input",{type:"hidden",name:"_token",value:r.csrfToken},null,8,W),t("input",{type:"hidden",name:"timearr[form_start_time]",class:"timearr form_start_time",value:n.preparationTime},null,8,X),f(p,{sectionName:r.sectionName,patientId:a.patientId,moduleId:a.moduleId,componentId:a.componentId,formErrors:n.formErrors},null,8,["sectionName","patientId","moduleId","componentId","formErrors"])]),t("div",H,[t("div",U,[t("div",j,[t("div",z,[t("button",{type:"button",class:"btn btn-primary m-1 draft_preparation",onClick:o[1]||(o[1]=(...e)=>n.callPreparationDraft&&n.callPreparationDraft(...e)),disabled:n.timerStatus==1},"Draft Save",8,G),t("button",{type:"submit",class:"btn btn-primary m-1 save_preparation",disabled:n.timerStatus==1},"Save",8,J)])])])])])])])],32)],64)}const Be=h(P,[["render",Q]]);export{Be as default};
