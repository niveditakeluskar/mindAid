import c from"./Text-813fccb2.js";import _ from"./TextHistory-dcf71ace.js";import{_ as h,d as i,r as a,o as p,e as f,b as t,q as I,I as v,f as r}from"./appInertia-949a05bd.js";const y={props:{patientId:Number,moduleId:Number,componentId:Number},data(){return{formErrors:{},stageId:null,showAlert:!1,timerStatus:null}},components:{Text:c,TextHistory:_},mounted(){this.time=document.getElementById("page_landing_times").value,this.timerStatus=document.getElementById("timer_runing_status").value,this.getStageID()},methods:{async getStageID(){try{let s="Text",o=await i.get(`/get_stage_id/${this.moduleId}/${this.componentId}/${s}`);this.stageId=o.data.stageID}catch{throw new Error("Failed to fetch stageID")}},async submitTextForm(){let s=document.getElementById("text_form"),o=new FormData(s);i.defaults.headers.common["X-CSRF-TOKEN"]=document.querySelector('meta[name="csrf-token"]').content;try{this.formErrors={};const e=await i.post("/ccm/monthly-monitoring-text",o);e&&e.status==200&&(this.showAlert=!0,updateTimer(this.patientId,1,this.moduleId),$(".form_start_time").val(e.data.form_start_time),setTimeout(()=>{this.time=document.getElementById("page_landing_times").value,this.showAlert=!1},3e3))}catch(e){e.response&&e.response.status===422?this.formErrors=e.response.data.errors:console.error("Error submitting form:",e)}}}},g={class:"row"},x={class:"col-lg-12 mb-3"},b=["value"],T=["value"],E=t("input",{type:"hidden",name:"start_time",value:"00:00:00"},null,-1),w=t("input",{type:"hidden",name:"end_time",value:"00:00:00"},null,-1),S=["value"],B=["value"],F=["value"],N=t("input",{type:"hidden",name:"step_id",value:"0"},null,-1),D=t("input",{type:"hidden",name:"form_name",value:"text_form"},null,-1),k=t("input",{type:"hidden",name:"content_title",value:"text_form"},null,-1),A=t("input",{type:"hidden",name:"template_type_id",value:"2"},null,-1),H=["value"],q={class:"card"},C={class:"card-body"},V=t("button",{type:"button",class:"close","data-dismiss":"alert"},"x",-1),z=t("strong",null,"Text data saved successfully! ",-1),K=t("span",{id:"text"},null,-1),M=[V,z,K],O={class:"card-footer"},R={class:"mc-footer"},X={class:"row"},j={class:"col-lg-12 text-right"},G=["disabled"];function J(s,o,e,L,n,d){const l=a("Text",!0),m=a("TextHistory");return p(),f("div",g,[t("div",x,[t("form",{id:"text_form",name:"text_form",onSubmit:o[0]||(o[0]=I((...u)=>d.submitTextForm&&d.submitTextForm(...u),["prevent"]))},[t("input",{type:"hidden",name:"uid",value:e.patientId},null,8,b),t("input",{type:"hidden",name:"patient_id",value:e.patientId},null,8,T),E,w,t("input",{type:"hidden",name:"module_id",value:e.moduleId},null,8,S),t("input",{type:"hidden",name:"component_id",value:e.componentId},null,8,B),t("input",{type:"hidden",name:"stage_id",value:n.stageId},null,8,F),N,D,k,A,t("input",{type:"hidden",name:"timearr[form_start_time]",class:"timearr form_start_time",value:s.time},null,8,H),t("div",q,[t("div",C,[t("div",{class:"alert alert-success",id:"success-alert",style:v({display:n.showAlert?"block":"none"})},M,4),r(l,{patientId:e.patientId,moduleId:e.moduleId,componentId:e.componentId,formErrors:n.formErrors},null,8,["patientId","moduleId","componentId","formErrors"])]),t("div",O,[t("div",R,[t("div",X,[t("div",j,[t("button",{type:"submit",id:"save-text",class:"btn btn-primary m-1",disabled:n.timerStatus==1},"Submit",8,G)])])])])])],32),r(m,{patientId:e.patientId,moduleId:e.moduleId},null,8,["patientId","moduleId"])])])}const W=h(y,[["render",J]]);export{W as default};
