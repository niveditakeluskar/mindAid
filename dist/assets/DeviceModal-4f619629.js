import{_ as se,l as s,m as ae,r as G,o as _,e as p,b as e,n as V,f as R,q as oe,i as J,s as ie,t as g,h as I,v as ne,F as E,j as q,d as C,p as de,a as le,k as N}from"./appInertia-949a05bd.js";import re from"./AgGridTable-e4c69b38.js";import"./AgGridTable.vue_vue_type_style_index_0_lang-f3773bde.js";const ce={props:{patientId:Number,moduleId:Number,componentId:Number},data(){return{isOpen:!1,medicationTime:!1}},components:{AgGridTable:re},methods:{openModal(){this.isOpen=!0,this.medicationTime=document.getElementById("page_landing_times").value},closeModal(){this.isOpen=!1}},setup(f){const l=s([]),u=s([]),i=s(null),h=s(!0),c=s(""),b=s(""),y=s({}),a=s(!1),v=s(!1),T=s([]),S=s([]),M=s([]),U=s(!1),Y=s(!1),z=s(!1),K=s(""),w=s(""),P=s(""),O=s([]),D=s(!1),F=s(""),X=s(0);let H=s([]),Q=s("");const L=s(""),x=s(""),W=s([{headerName:"Sr. No.",valueGetter:"node.rowIndex + 1"},{headerName:"Code",field:"device_code"},{headerName:"Device Condition",field:"device_name"},{headerName:"Partner",field:"name"},{headerName:"Partner Device",field:"device_name"},{headerName:"Last Modifed By",field:"updated_at"},{headerName:"Last Modifed On",field:"updated_at"},{headerName:"Action",field:"action",cellRenderer:t=>{const n=document.createElement("div"),o=document.createElement("a");o.href="javascript:void(0)",o.dataset.toggle="tooltip",o.dataset.id=t.data.id,o.dataset.originalTitle="Edit",o.classList.add("editDevicesdata"),o.title="Edit";const d=document.createElement("i");d.classList.add("editform","i-Pen-4"),o.appendChild(d),n.appendChild(o),n.appendChild(document.createTextNode(" "));const m=document.createElement("a");m.href="javascript:void(0)",m.dataset.id=t.data.id,t.data.status===1?(m.classList.add("change_device_status_active"),m.id="active",m.title="Active"):(m.classList.add("change_device_status_deactive"),m.id="deactive",m.title="Deactive");const B=document.createElement("i");return B.classList.add(t.data.status===1?"i-Yess":"i-Closee",t.data.status===1?"i-Yes":"i-Close"),m.appendChild(B),n.appendChild(m),n}}]),k=async()=>{try{D.value=!0;const t=await fetch(`/patients/device-deviceslist/${f.patientId}`);if(!t.ok)throw new Error("Failed to fetch followup task list");D.value=!1;const n=await t.json();n.data?O.value=n.data:console.error("Data is undefined in the response:",n)}catch(t){console.error("Error fetching followup task list:",t),D.value=!1}},Z=async()=>{try{const t=w,n=await C.get(`/patients/ajax/${t}/practice/practiceId/moduleId/patient`);u.value=n.data}catch(t){console.error(t,t.response)}},ee=async t=>{clearGoals(),v.value=!0;try{L.value=t;const n=await fetch(`/ccm/diagnosis-select/${t}/${f.patientId}`);if(!n.ok)throw new Error("Failed to fetch followup task list");const d=(await n.json()).care_plan_form.static;d&&d.goals&&(T.value=JSON.parse(d.goals)),c.value=d.diagnosis,w.value=d.diagnosis,P.value=d.code,x.value=d.condition,b.value=d.comments,d&&d.tasks&&(S.value=JSON.parse(d.tasks)),d&&d.symptoms&&(M.value=JSON.parse(d.symptoms)),v.value=!1,h.value=!1}catch(n){console.error("Error fetching followup task list:",n),v.value=!1}},te=async()=>{v.value=!0;let t=document.getElementById("devices_form"),n=new FormData(t);C.defaults.headers.common["X-CSRF-TOKEN"]=document.querySelector('meta[name="csrf-token"]').content;try{const o=await C.post("/patients/master-devices",n);o&&o.status==200&&(a.value=!0,k(),$("#deviceAlert").html('<div class="alert alert-success"> Data Saved Successfully </div>'),document.getElementById("devices_form").reset(),setTimeout(()=>{$("#deviceAlert").html("")},3e3)),v.value=!1}catch(o){v.value=!1,o.response&&o.response.status===422?(y.value=o.response.data.errors,console.log(o.response.data.errors),setTimeout(function(){y.value={}},3e3)):console.error("Error submitting form:",o),v.value=!1}},j=async()=>{try{await new Promise(o=>setTimeout(o,2e3));const t=await fetch("/patients/get-activePartner");if(!t.ok)throw new Error("Failed to fetch diagnosis list");const n=await t.json();l.value=Object.entries(n).map(([o,d])=>({id:o,partner_id:d}))}catch(t){console.error("Error fetching diagnosis list:",t)}},A=async()=>{try{await new Promise(o=>setTimeout(o,2e3));const t=await fetch("/patients/get-partner_devices");if(!t.ok)throw new Error("Failed to fetch diagnosis list");const n=await t.json();u.value=Object.entries(n).map(([o,d])=>({id:o,device_name:d}))}catch(t){console.error("Error fetching diagnosis list:",t)}};return ae(async()=>{j(),A(),k();try{F.value=document.getElementById("page_landing_times").value}catch(t){console.error("Error on page load:",t)}}),{handlePartnerDevice:Z,partnersDeviceOption:u,fetchPartnerDeviceId:A,fetchPartnerId:j,fetchDeviceList:k,isSaveButtonDisabled:h,selectedPartnerDeviceId:c,comments:b,selectedCode:P,loading:D,columnDefs:W,passRowData:O,partnersOption:l,codeOptions:H,selectedMedication:Q,medicationTime:F,deviceStageId:X,selectedPartnerId:w,formErrors:y,goals:T,tasks:S,symptoms:M,isInitialGoalFilled:U,isInitialTaskFilled:Y,isInitialSymptomFilled:z,goalsText:K,submitDeviceForm:te,isLoading:v,showSuccessAlert:a,selectedEditDiagnosId:L,editPatientDignosis:ee,selectedcondition:x,startTimeInput:i}}},r=f=>(de("data-v-9962d0a5"),f=f(),le(),f),me={class:"modal-content"},ue={class:"modal-header"},ve=r(()=>e("h4",{class:"modal-title"},"Add Devices",-1)),_e={class:"modal-body",style:{"padding-top":"10px"}},pe=r(()=>e("div",{id:"deviceAlert"},null,-1)),fe=["value"],he=["value"],ye=r(()=>e("input",{type:"hidden",name:"start_time",value:"00:00:00"},null,-1)),ge=r(()=>e("input",{type:"hidden",name:"end_time",value:"00:00:00"},null,-1)),be=["value"],De=["value"],we=["value"],ke=r(()=>e("input",{type:"hidden",name:"form_name",value:"devices_form"},null,-1)),Ie=r(()=>e("input",{type:"hidden",name:"idd",id:"idd"},null,-1)),Ee=["value"],Ce={class:"row"},Ne=r(()=>e("div",{id:"devices_success"},null,-1)),Te={class:"col-md-12 form-group"},Se=r(()=>e("label",null,[N("Devices ID"),e("span",{class:"error"},"*")],-1)),Me=r(()=>e("input",{type:"text",class:"form-control",name:"device_id",id:"device_id"},null,-1)),Pe=r(()=>e("div",{class:"invalid-feedback"},null,-1)),Oe={key:0,class:"invalid-feedback",style:{display:"block"}},Fe={class:"row"},Le={class:"col-md-6 form-group"},xe=r(()=>e("label",null,[N("Partners"),e("span",{class:"error"},"*")],-1)),je=["value"],Ae={key:0,class:"invalid-feedback",style:{display:"block"}},Be={class:"col-md-6 form-group"},Ge=r(()=>e("label",null,[N("Partner Devices"),e("span",{class:"error"},"*")],-1)),Ve={class:"custom-select show-tick",name:"partner_devices_id"},Re=["value"],Je={key:0,class:"invalid-feedback",style:{display:"block"}},qe={class:"modal-footer"},Ue=r(()=>e("button",{type:"submit",class:"btn btn-primary float-right submit-add-patient-devices"},"Submit",-1)),Ye=r(()=>e("div",{class:"separator-breadcrumb border-top"},null,-1)),ze={class:"row"},Ke={class:"col-md-12"},Xe={class:"modal-footer"};function He(f,l,u,i,h,c){const b=G("loading-spinner"),y=G("AgGridTable");return _(),p(E,null,[e("div",{class:V(["overlay",{open:h.isOpen}]),onClick:l[0]||(l[0]=(...a)=>c.closeModal&&c.closeModal(...a))},null,2),e("div",{class:V(["modal fade",{open:h.isOpen}])},[e("div",me,[e("div",ue,[ve,e("button",{type:"button",class:"close",onClick:l[1]||(l[1]=(...a)=>c.closeModal&&c.closeModal(...a))},"Ã—")]),e("div",_e,[R(b,{isLoading:i.isLoading},null,8,["isLoading"]),pe,e("form",{name:"devices_form",id:"devices_form",onSubmit:l[6]||(l[6]=oe((...a)=>i.submitDeviceForm&&i.submitDeviceForm(...a),["prevent"]))},[e("input",{type:"hidden",name:"patient_id",value:u.patientId},null,8,fe),e("input",{type:"hidden",name:"uid",value:u.patientId},null,8,he),ye,ge,e("input",{type:"hidden",name:"module_id",value:u.moduleId},null,8,be),e("input",{type:"hidden",name:"component_id",value:u.componentId},null,8,De),e("input",{type:"hidden",name:"stage_id",value:i.deviceStageId},null,8,we),ke,Ie,J(e("input",{type:"hidden",name:"timearr[form_start_time]",class:"timearr form_start_time",value:i.medicationTime,"onUpdate:modelValue":l[2]||(l[2]=a=>i.medicationTime=a)},null,8,Ee),[[ie,i.medicationTime]]),e("div",Ce,[Ne,e("div",Te,[Se,Me,Pe,i.formErrors.device_id?(_(),p("div",Oe,g(i.formErrors.device_id[0]),1)):I("",!0)])]),e("div",Fe,[e("div",Le,[xe,J(e("select",{class:"custom-select show-tick",name:"partner_id","onUpdate:modelValue":l[3]||(l[3]=a=>i.selectedPartnerId=a),onChange:l[4]||(l[4]=(...a)=>i.handlePartnerDevice&&i.handlePartnerDevice(...a))},[(_(!0),p(E,null,q(i.partnersOption,a=>(_(),p("option",{key:a.id,value:a.id},g(a.partner_id),9,je))),128))],544),[[ne,i.selectedPartnerId]]),i.formErrors.partner_id?(_(),p("div",Ae,g(i.formErrors.partner_id[0]),1)):I("",!0)]),e("div",Be,[Ge,e("select",Ve,[(_(!0),p(E,null,q(i.partnersDeviceOption,a=>(_(),p("option",{key:a.id,value:a.id},g(a.device_name),9,Re))),128))]),i.formErrors.partner_devices_id?(_(),p("div",Je,g(i.formErrors.partner_devices_id[0]),1)):I("",!0)])]),e("div",qe,[Ue,e("button",{type:"button",class:"btn btn-default float-left",onClick:l[5]||(l[5]=(...a)=>c.closeModal&&c.closeModal(...a))},"Close")])],32),Ye,e("div",ze,[e("div",Ke,[R(y,{rowData:i.passRowData,columnDefs:i.columnDefs},null,8,["rowData","columnDefs"])])])]),e("div",Xe,[e("button",{type:"button",class:"btn btn-default","data-dismiss":"modal",onClick:l[7]||(l[7]=(...a)=>c.closeModal&&c.closeModal(...a))},"Close")])])],2)],64)}const $e=se(ce,[["render",He],["__scopeId","data-v-9962d0a5"]]);export{$e as default};
