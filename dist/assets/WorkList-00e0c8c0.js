import{_ as te,l as n,S as f,G as ae,m as oe,H as se,r as x,o as b,c as le,w as ne,b as e,f as T,q as ie,i as h,v as y,e as L,j as I,t as R,F as G,s as ce}from"./appInertia-949a05bd.js";import re from"./AgGridTable-e4c69b38.js";import de from"./LayoutComponent-df3a46ea.js";import O from"./PatientStatus-7aba39e8.js";import"./AgGridTable.vue_vue_type_style_index_0_lang-f3773bde.js";import"./Header-2dd02e50.js";import"./Footer-27143538.js";const ue={props:{moduleId:Number,componentId:Number},components:{LayoutComponent:de,PatientStatus:O,AgGridTable:re},setup(_){const{callExternalFunctionWithParams:l}=O.setup(),w=n(null),s=n([]),g=n(!1),A=n(null),E=n(!1),c=n(null),r=n(null),C=n([]),a=n([]),m=n(null),d=n("00:20:00"),p=n(null),u=n("3");f(()=>c.value),f(()=>r.value),f(()=>u.value),f(()=>m.value),f(()=>d.value===""?null:d.value),f(()=>p.value===""?null:p.value);const M=n();ae(()=>{z(),j()}),oe(async()=>{H()});const W=n([{headerName:"Sr. No.",valueGetter:"node.rowIndex + 1",flex:1},{headerName:"EMR No.",field:"pppracticeemr"},{headerName:"Patient Name",field:"full_name",cellRenderer:function(o){return`<div style="display: flex; align-items: center;">
                    <img src="https://mnt1.d-insights.global/assets/images/faces/avatar.png" width="50px" class="user-image">
                    <span style="margin-left: 4px;">${o.data.full_name.split(" ").map(v=>v.charAt(0).toUpperCase()+v.slice(1).toLowerCase()).join(" ")}</span>
                </div>`},flex:2},{headerName:"DOB",field:"pdob",cellRenderer:function(o){const t=o.value;return t?new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"2-digit",day:"2-digit"}).replace(/\//g,"-"):null}},{headerName:"Practice",field:"pracpracticename",flex:2},{headerName:"Last contact Date",field:"csslastdate",cellRenderer:function(o){const t=o.data.csslastdate;return t?new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"2-digit",day:"2-digit"}).replace(/\//g,"-"):null}},{headerName:"Total Time Spent",field:"ptrtotaltime"},{headerName:"Action",field:"action",cellRenderer:o=>{const t=o.data;return t&&t.action?t.action:""}},{headerName:"Patient Status",field:"activedeactive",cellRenderer:o=>{const t=document.createElement("a"),i=document.createElement("i"),{data:v}=o;return v.pstatus===1?(i.classList.add("text-20","i-Yes"),i.style.color="green"):(i.classList.add("text-20","i-Close"),i.style.color="red"),t.appendChild(i),t.classList.add("ActiveDeactiveClass"),t.href="javascript:void(0)",t.addEventListener("click",()=>{q(v.pid,v.pstatus)}),t}},{headerName:"Call Score",field:"pssscore"}]);se(c,o=>{j(o)});const q=(o,t)=>{M.value.openModal(),l(o,t)},z=async()=>{try{const o=await fetch("../org/practiceslist");if(!o.ok)throw new Error("Failed to fetch practices");const t=await o.json();C.value=t}catch(o){console.error("Error fetching practices:",o)}},j=async o=>{try{if(o===void 0)return;o||(o=null);const t=await fetch("/patients/ajax/patientlist/"+o+"/patientlist");if(!t.ok)throw new Error("Failed to fetch patients");const i=await t.json();return a.value=i,Promise.resolve(i)}catch(t){return console.error("Error fetching patients:",t),Promise.reject(t)}};let S,P,V,U,B,k;const H=async()=>{try{const t=await(await fetch("/patients/getuser-filters")).json();F(t.practice,t.patient,u.value,t.timeoption,t.time,t.patientstatus),c.value=t.practice,u.value=u.value,m.value=t.timeoption,d.value=t.time,p.value=t.patientstatus,r.value=t.patient}catch(o){console.error("Error fetching user filters:",o)}},K=async()=>{m.value==="4"?d.value="":d.value="00:20:00"},X=async()=>{try{g.value=!0,F(c.value===""?null:c.value,r.value===""?null:r.value,u.value===""?null:u.value,m.value===""?null:m.value,d.value===""?null:d.value,p.value===""?null:p.value),J()}catch(o){console.error("Error fetching data:",o)}},Y=async()=>{F(c.value,r.value,u.value,m.value,d.value,p.value)},J=async()=>{try{S=c.value||null,P=r.value||null,V=u.value||null,U=m.value||null,B=d.value||null,k=p.value||null,P||(P=null),S||(S=null),k||(k=null);const o=document.querySelector('meta[name="csrf-token"]').getAttribute("content"),t=await fetch(`/patients/worklist/saveuser-filters/${S}/${P}/${V}/${U}/${B}/${k}`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":o}});t.ok||console.error("Failed to save user filters:",t.statusText)}catch(o){console.error("Error saving user filters:",o)}},Q=async()=>{c.value="",r.value=""},F=async(o,t,i,v,Z,$)=>{try{t||(t=null);const D=await fetch(`/patients/worklist/${o}/${t}/${i}/${v}/${Z}/${$}`);if(!D.ok)throw new Error("Failed to fetch patient list");const ee=(await D.json()).data.map(N=>({...N,full_name:[N.pfname,N.pmname,N.plname].filter(Boolean).join(" ")}));s.value=ee||[],g.value=!1}catch(D){console.error("Error fetching patient list:",D),g.value=!1}};return{patientReloadFn:Y,PatientStatusRef:M,columnDefs:W,isLoading:g,tableInstance:A,showModal:E,selectedPractice:c,selectedPatients:r,passRowData:s,practices:C,patients:a,selectedOption:m,timeValue:d,activedeactivestatus:p,patientsmodules:u,layoutComponentRef:w,handleSubmit:X,handleChange:K,handleReset:Q}}},me=e("div",{class:"breadcrusmb"},[e("div",{class:"row",style:{"margin-top":"10px"}},[e("div",{class:"col-md-8"},[e("h4",{class:"card-title mb-3"},"Work List")]),e("div",{class:"form-group col-md-4"})])],-1),pe=e("div",{class:"separator-breadcrumb border-top"},null,-1),ve=e("div",{id:"success"},null,-1),fe={class:"row"},he={class:"col-md-12 mb-4"},_e={class:"card text-left"},ge={class:"card-body"},be={class:"form-row"},ye={class:"col-md-6 form-group mb-6"},we=e("label",{for:"practicename"},"Practice Name",-1),Ce=["value"],Se={class:"col-md-6 form-group mb-6"},Pe=e("label",{for:"patientsname"},"Patient Name",-1),ke=e("option",{value:"",selected:""},"All Patients",-1),De=["value"],Ne={class:"form-row"},xe={class:"col-md-3 form-group mb-3"},Le=e("option",{value:"2"},"Greater than",-1),Re=e("option",{value:"1",selected:""},"Less than",-1),Ee=e("option",{value:"3"},"Equal to",-1),Fe=e("option",{value:"4"},"All",-1),Te=[Le,Re,Ee,Fe],Ae={class:"col-md-3 form-group mb-3"},Me=e("label",{for:"time"},"Time Spent",-1),je={class:"col-md-3 form-group mb-3"},Ve=e("label",{for:"module"},"Module",-1),Ue=e("option",{value:"3",selected:""},"CCM",-1),Be=e("option",{value:"2"},"RPM",-1),Ie=[Ue,Be],Ge={class:"col-md-3 form-group mb-3"},Oe=e("label",{for:"activedeactivestatus"},"Patient Status",-1),We=e("option",{value:"",selected:""},"All (Active,Suspended,Deactivated,Deceased)",-1),qe=e("option",{value:"1"},"Active",-1),ze=e("option",{value:"0"},"Suspended",-1),He=e("option",{value:"2"},"Deactivated",-1),Ke=e("option",{value:"3"},"Deceased",-1),Xe=[We,qe,ze,He,Ke],Ye={class:"col-md-3 form-group mb-3"},Je=e("div",{class:"col-md-8 form-group"},[e("h4",{style:{float:"right"}},[e("label",{"float-right":""},"Total Minutes Spent"),e("label",{for:"programs",class:"cmtotaltimespent","data-toggle":"tooltip","data-placement":"right",title:"","data-original-title":"Total minutes spent/Total No. of patients",style:{"margin-left":"2px","margin-top":"10px","font-size":"16px"}})])],-1),Qe={class:"row mb-4"},Ze={class:"col-md-12 mb-4"},$e={class:"card text-left"},et={class:"card-body"};function tt(_,l,w,s,g,A){const E=x("loading-spinner"),c=x("PatientStatus"),r=x("AgGridTable"),C=x("LayoutComponent");return b(),le(C,{ref:"layoutComponentRef"},{default:ne(()=>[e("div",null,[T(E,{isLoading:s.isLoading},null,8,["isLoading"]),me,pe,ve,e("div",fe,[e("div",he,[e("div",_e,[e("div",ge,[e("form",{onSubmit:l[10]||(l[10]=ie((...a)=>s.handleSubmit&&s.handleSubmit(...a),["prevent"]))},[e("div",be,[e("div",ye,[we,h(e("select",{id:"practices",class:"custom-select show-tick select2","data-live-search":"true","onUpdate:modelValue":l[0]||(l[0]=a=>s.selectedPractice=a),onChange:l[1]||(l[1]=(...a)=>_.handlePracticeChange&&_.handlePracticeChange(...a))},[(b(!0),L(G,null,I(s.practices,a=>(b(),L("option",{key:a.id,value:a.id},R(a.name),9,Ce))),128))],544),[[y,s.selectedPractice]])]),e("div",Se,[Pe,h(e("select",{id:"patients",class:"custom-select show-tick select2","onUpdate:modelValue":l[2]||(l[2]=a=>s.selectedPatients=a)},[ke,(b(!0),L(G,null,I(s.patients,a=>(b(),L("option",{key:a.id,value:a.id},R(a.fname)+" "+R(a.mname)+" "+R(a.lname),9,De))),128))],512),[[y,s.selectedPatients]])])]),e("div",Ne,[e("div",xe,[h(e("select",{id:"timeoption",class:"custom-select show-tick",style:{"margin-top":"23px"},"onUpdate:modelValue":l[3]||(l[3]=a=>s.selectedOption=a),onChange:l[4]||(l[4]=(...a)=>s.handleChange&&s.handleChange(...a))},Te,544),[[y,s.selectedOption]])]),e("div",Ae,[Me,h(e("input",{"onUpdate:modelValue":l[5]||(l[5]=a=>s.timeValue=a),id:"time",placeholder:"hh:mm:ss",class:"form-control",name:"time",type:"text",value:"",autocomplete:"off"},null,512),[[ce,s.timeValue]])]),e("div",je,[Ve,h(e("select",{name:"modules",id:"modules","onUpdate:modelValue":l[6]||(l[6]=a=>s.patientsmodules=a),class:"custom-select show-tick"},Ie,512),[[y,s.patientsmodules]])]),e("div",Ge,[Oe,h(e("select",{id:"activedeactivestatus","onUpdate:modelValue":l[7]||(l[7]=a=>s.activedeactivestatus=a),name:"activedeactivestatus",class:"custom-select show-tick"},Xe,512),[[y,s.activedeactivestatus]])]),e("div",Ye,[e("button",{type:"submit",class:"btn btn-primary mt-4 mr-2",onClick:l[8]||(l[8]=(...a)=>_.handleSearch&&_.handleSearch(...a))},"Search"),e("button",{type:"button",class:"btn btn-primary mt-4",onClick:l[9]||(l[9]=(...a)=>s.handleReset&&s.handleReset(...a))},"Reset")]),Je])],32),T(c,{ref:"PatientStatusRef",moduleId:w.moduleId,componentId:w.componentId,PatientWorkList:s.patientReloadFn},null,8,["moduleId","componentId","PatientWorkList"])])])])]),e("div",Qe,[e("div",Ze,[e("div",$e,[e("div",et,[T(r,{rowData:s.passRowData,columnDefs:s.columnDefs},null,8,["rowData","columnDefs"])])])])])])]),_:1},512)}const ut=te(ue,[["render",tt]]);export{ut as default};
