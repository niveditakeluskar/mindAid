import{_ as g,l as a,m as N,G as F,H as I,o as u,e as c,h as _,b as e,I as x,q as k,i as E,s as M,F as w,d as v,k as T}from"./appInertia-949a05bd.js";import"./AgGridTable.vue_vue_type_style_index_0_lang-f3773bde.js";const B={props:{patientId:Number,moduleId:Number,componentId:Number,stageid:Number,finNumber:Number,patientFinNumberTab:{type:Function,required:!0}},components:{},setup(l){const n=a(null);let s=a();const t=a(null),m=a(!1),d=a(!1);let o=a([]);const h=a(!1),p=()=>{m.value=!0,n.value=document.getElementById("page_landing_times").value,s.value=document.getElementById("timer_runing_status").value},f=()=>{m.value=!1};let y=async()=>{let r=document.getElementById("fin_number_form"),b=new FormData(r);v.defaults.headers.common["X-CSRF-TOKEN"]=document.querySelector('meta[name="csrf-token"]').content;try{o.value=={};const i=await v.post("/patients/save-patient-fin-number",b);i&&i.status==200&&(d.value=!0,updateTimer(l.patientId,"1",l.moduleId),typeof l.patientFinNumberTab=="function"&&l.patientFinNumberTab(),$(".form_start_time").val(i.data.form_start_time),document.getElementById("fin_number_form").reset(),setTimeout(()=>{d.value=!1,n.value=document.getElementById("page_landing_times").value,f()},3e3),o.value=[])}catch(i){i.response&&i.response.status===422?(o.value=i.response.data.errors,setTimeout(function(){o.value={}},3e3)):console.error("Error submitting form:",i)}};return N(()=>{try{n.value=document.getElementById("page_landing_times").value,t.value=l.finNumber}catch(r){console.error("Error on page load:",r)}}),F(()=>{}),I(()=>d,(r,b)=>{d.value=r}),{loading:h,isOpen:m,openModal:p,closeModal:f,showAlert:d,finnumberTime:n,formErrors:o,finNumber:t,submitFinNumberForm:y,timerStatus:s}}},C={key:1,class:"modal fade open",style:{width:"500px",height:"242px",left:"33%",top:"20%"}},S={class:"modal-content"},O={class:"modal-header"},V=e("h4",{class:"modal-title"},"FIN Number",-1),q={class:"modal-body"},A={class:"row"},D=e("button",{type:"button",class:"close","data-dismiss":"alert"},"x",-1),z=e("strong",null,"data saved successfully! ",-1),G=e("span",{id:"text"},null,-1),H=[D,z,G],K={class:"col-md-12"},R={class:"form-group"},U=["value"],X=["value"],j=["value"],J=["value"],L=["value"],P=e("input",{type:"hidden",name:"id"},null,-1),Q=e("input",{type:"hidden",name:"form_name",value:"fin_number_form"},null,-1),W=e("input",{type:"hidden",id:"timer_runing_status",value:"0"},null,-1),Y=["value"],Z=e("label",null,[T("FIN Number"),e("span",{class:"error"},"*")],-1),ee={key:0,class:"invalid-feedback",style:{display:"block"}},te=["textContent"],ne={class:"card-footer"},oe={class:"mc-footer"},se={class:"row"},ie={class:"col-lg-12 text-right"},ae=["disabled"];function le(l,n,s,t,m,d){return u(),c(w,null,[t.isOpen?(u(),c("div",{key:0,class:"overlay open",onClick:n[0]||(n[0]=(...o)=>t.closeModal&&t.closeModal(...o))})):_("",!0),t.isOpen?(u(),c("div",C,[e("div",S,[e("div",O,[V,e("button",{type:"button",class:"close",onClick:n[1]||(n[1]=(...o)=>t.closeModal&&t.closeModal(...o))},"Ã—")]),e("div",q,[e("div",A,[e("div",{class:"alert alert-success",style:x({display:t.showAlert?"block":"none"})},H,4),e("div",K,[e("div",R,[e("form",{id:"fin_number_form",name:"fin_number_form",onSubmit:n[3]||(n[3]=k((...o)=>t.submitFinNumberForm&&t.submitFinNumberForm(...o),["prevent"]))},[e("input",{type:"hidden",name:"patient_id",id:"hidden_id",value:s.patientId},null,8,U),e("input",{type:"hidden",name:"uid",id:"uid",value:s.patientId},null,8,X),e("input",{type:"hidden",name:"module_id",id:"page_module_id",value:s.moduleId},null,8,j),e("input",{type:"hidden",name:"component_id",id:"page_component_id",value:s.componentId},null,8,J),e("input",{type:"hidden",name:"stage_id",value:s.stageid},null,8,L),P,Q,W,e("input",{type:"hidden",name:"timearr[form_start_time]",class:"timearr form_start_time",value:t.finnumberTime},null,8,Y),Z,E(e("textarea",{name:"fin_number",class:"form-control forms-element","onUpdate:modelValue":n[2]||(n[2]=o=>t.finNumber=o)},null,512),[[M,t.finNumber]]),t.formErrors?(u(),c("div",ee,[e("span",{textContent:t.formErrors.fin_number},null,8,te)])):_("",!0)],32)])])])]),e("div",ne,[e("div",oe,[e("div",se,[e("div",ie,[e("button",{type:"submit",class:"btn btn-primary float-right ml-2",id:"submit-fin-number",onClick:n[4]||(n[4]=(...o)=>t.submitFinNumberForm&&t.submitFinNumberForm(...o)),disabled:t.timerStatus==1},"Save",8,ae),e("button",{type:"button",class:"btn btn-default",onClick:n[5]||(n[5]=(...o)=>t.closeModal&&t.closeModal(...o))},"Close")])])])])])])):_("",!0)],64)}const me=g(B,[["render",le]]);export{me as default};
