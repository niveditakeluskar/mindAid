import{_ as D,l as h,r as F,o as d,e as n,b as e,n as S,q as T,f as R,t as m,h as v,F as I,j as O,d as E,N,k as w}from"./appInertia-949a05bd.js";import"./AgGridTable.vue_vue_type_style_index_0_lang-f3773bde.js";const M={props:{moduleId:Number,componentId:Number,PatientWorkList:{type:Function,required:!0},PatientBasicInfoTab:{type:Function,required:!0}},setup(f){const a=h([]),u=h(!1),t=h(!1),y=h({}),p=h(""),k=async()=>{u.value=!0,P();const o=document.getElementById("page_landing_times");if(!o||o.value===null){const r=await C();r&&(p.value=r)}else p.value=o.value};let i=h("");const g=()=>{u.value=!1,$("#status").prop("checked",!1)},C=async()=>{try{const o=await fetch("/system/get-landing-time");if(!o.ok)throw new Error("Failed to fetch landing time");return(await o.json()).landing_time}catch(o){return console.error("Error fetching landing time:",o),null}},P=async()=>{try{const r=await(await fetch("/patients/get-deactivationreasons")).json(),s=Object.entries(r).map(([_,c])=>({id:_,reasons:c}));a.value=s}catch(o){console.error("Error fetching ActiveDeactiveReasons:",o)}};return{fetchLandingTime:C,selectPatientId:i,time:p,submitPatientForm:async()=>{t.value=!0;let o=document.getElementById("active_deactive_form"),r=new FormData(o);E.defaults.headers.common["X-CSRF-TOKEN"]=document.querySelector('meta[name="csrf-token"]').content;try{const s=await E.post("/patients/patient-active-deactive",r);if(s&&s.status==200){typeof f.PatientWorkList=="function"&&f.PatientWorkList();const c=window.location.href.split("/"),l=c[c.length-1];isNaN(l)||updateTimer(l,"1",f.moduleId),typeof f.PatientBasicInfoTab=="function"&&f.PatientBasicInfoTab(),$(".form_start_time").val(s.data.form_start_time),p.value=s.data.form_start_time,$("#patientalertdiv").html('<div class="alert alert-success"> Data Saved Successfully </div>'),document.getElementById("active_deactive_form").reset(),setTimeout(function(){$("#patientalertdiv").html("")},3e3)}setTimeout(function(){g()},3e3),t.value=!1}catch(s){t.value=!1,s.response&&s.response.status===422?(y.value=s.response.data.errors,setTimeout(function(){y.value={}},3e3),console.log(s.response.data.errors)):($("#patientalertdiv").html('<div class="alert alert-danger">Error: '+s+"</div>"),console.error("Error submitting form:",s),setTimeout(function(){$("#patientalertdiv").html("")},3e3))}},showReasonOptions:o=>{$("form[name='active_deactive_form'] #date_value").show(),o==1?($("form[name='active_deactive_form'] #fromdate").hide(),$("form[name='active_deactive_form'] #deceasedfromdate").hide(),$("form[name='active_deactive_form'] #todate").hide(),$("form[name='active_deactive_form'] #deactivation_drpdwn_div").hide()):o==0?($("form[name='active_deactive_form'] #fromdate").show(),$("form[name='active_deactive_form'] #deceasedfromdate").hide(),$("form[name='active_deactive_form'] #todate").show(),$("form[name='active_deactive_form'] #deactivation_drpdwn_div").hide()):o==2?($("form[name='active_deactive_form'] #fromdate").show(),$("form[name='active_deactive_form'] #deceasedfromdate").hide(),$("form[name='active_deactive_form'] #todate").hide(),$("form[name='active_deactive_form'] #deactivation_drpdwn_div").show()):o==3?($("form[name='active_deactive_form'] #fromdate").hide(),$("form[name='active_deactive_form'] #deceasedfromdate").show(),$("form[name='active_deactive_form'] #todate").hide(),$("form[name='active_deactive_form'] #deactivation_drpdwn_div").hide()):($("#status").prop("checked",!1),$("form[name='active_deactive_form'] #date_value").hide(),alert("Invalid Request"))},callExternalFunctionWithParams:(o,r)=>{if($.isNumeric(o)==!0){const c=o;var s=$("#modules").val();E({method:"GET",url:`/patients/patient-module/${c}/patient-module`}).then(function(l){$(".enrolledservice_modules").html("");for(var x=l.data.length,b=0;b<x;b++)$(".enrolledservice_modules").append(`<option value="${l.data[b].module_id}">${l.data[b].module.module}</option>`);$("#enrolledservice_modules").val(s).trigger("change")}).catch(function(l){console.error(l,l.response)});var _=r;$("form[name='active_deactive_form'] #worklistclick").val("1"),$("form[name='active_deactive_form'] #patientid").val(c),$("form[name='active_deactive_form'] #patientStatId").val(c),$("form[name='active_deactive_form'] #uid").val(c),$("form[name='active_deactive_form'] #date_value").hide(),$("form[name='active_deactive_form'] #fromdate").hide(),$("form[name='active_deactive_form'] #todate").hide(),$("#status").prop("checked",!1),_==0&&($("form[name='active_deactive_form'] #role1").show(),$("form[name='active_deactive_form'] #role0").hide(),$("form[name='active_deactive_form'] #role2").show(),$("form[name='active_deactive_form'] #role3").show()),_==1&&($("form[name='active_deactive_form'] #role1").hide(),$("form[name='active_deactive_form'] #role0").show(),$("form[name='active_deactive_form'] #role2").show(),$("form[name='active_deactive_form'] #role3").show()),_==2&&($("form[name='active_deactive_form'] #role1").show(),$("form[name='active_deactive_form'] #role0").show(),$("form[name='active_deactive_form'] #role2").hide(),$("form[name='active_deactive_form'] #role3").show()),_==3&&($("form[name='active_deactive_form'] #role1").show(),$("form[name='active_deactive_form'] #role0").show(),$("form[name='active_deactive_form'] #role2").show(),$("form[name='active_deactive_form'] #role3").hide())}else g()},isOpen:u,openModal:k,closeModal:g,fetchActiveDeactiveReasons:P,Deactivations:a,isLoading:t,formErrors:y}}},B={class:"modal-content"},L={class:"modal-header"},q=e("h4",{class:"modal-title"},"Change Patient Status",-1),V={class:"modal-body",style:{"padding-top":"10px"},id:"active-deactive"},W=N('<div id="patientalertdiv"></div><input type="hidden" name="patient_id" id="patientStatId"><input type="hidden" name="uid" id="uid"><input type="hidden" name="start_time" value="00:00:00"><input type="hidden" name="end_time" value="00:00:00">',5),j=["value"],A=["value"],U=e("input",{type:"hidden",name:"form_name",value:"active_deactive_form"},null,-1),z=e("input",{type:"hidden",name:"id"},null,-1),G=e("input",{type:"hidden",name:"worklist",id:"worklist"},null,-1),K=e("input",{type:"hidden",name:"patientid",id:"patientid"},null,-1),X=["value"],H={class:"card-body"},J={class:"row"},Q={class:"col-md-12 form-group mb-3"},Y=e("label",{for:"module"},"Module",-1),Z=e("select",{name:"modules",id:"enrolledservice_modules",class:"custom-select show-tick enrolledservice_modules"},null,-1),ee={key:0,class:"invalid-feedback",style:{display:"block"}},te={class:"col-md-12"},oe={class:"form-group"},ae=e("label",{for:"status"},[w(" Select the Status "),e("span",{class:"error"},"*")],-1),ie={class:"forms-element"},se={class:"form-row"},de={class:"radio radio-primary col-md-3 float-left",id:"role1"},ne=e("span",null,"Active",-1),re=e("span",{class:"checkmark"},null,-1),ce={class:"radio radio-primary col-md-3 float-left",id:"role0"},le=e("span",null,"Suspended",-1),me=e("span",{class:"checkmark"},null,-1),_e={class:"radio radio-primary col-md-3 float-left",id:"role2"},ve=e("span",null,"Deactivated",-1),fe=e("span",{class:"checkmark"},null,-1),ue={class:"radio radio-primary col-md-3 float-left",id:"role3"},he=e("span",null,"Deceased",-1),pe=e("span",{class:"checkmark"},null,-1),ye={key:0,class:"form-row invalid-feedback",style:{display:"block"}},be={class:"col-md-12",id:"date_value"},we={class:"form-group row"},ke={class:"col-md-6 form-group mb-3",id:"fromdate"},ge=e("label",{for:"date",id:"from_date"},[w("From Date "),e("span",{class:"error"},"*")],-1),$e=e("input",{name:"activedeactivefromdate",id:"fromdate",type:"date"},null,-1),Ee={key:0,class:"form-row invalid-feedback",style:{display:"block"}},Ce={class:"col-md-6 form-group mb-3",id:"deceasedfromdate"},Pe=e("label",{for:"date",id:"from_date"},[w("Date of Deceased "),e("span",{class:"error"},"*")],-1),Se=e("input",{name:"deceasedfromdate",id:"deceasedfromdate",type:"date"},null,-1),Ie={key:0,class:"form-row invalid-feedback",style:{display:"block"}},Ne={class:"col-md-6 form-group mb-3",id:"todate"},xe=e("label",{for:"date"},[w("To Date "),e("span",{class:"error"},"*")],-1),De=e("input",{name:"activedeactivetodate",id:"todate",type:"date"},null,-1),Fe={key:0,class:"form-row invalid-feedback",style:{display:"block"}},Te={class:"col-md-6 form-group mb-3",id:"deactivation_drpdwn_div"},Re=e("label",{for:"deactivation_drpdwn"},"Reason for Deactivation",-1),Oe={id:"practices",class:"custom-select show-tick select2",name:"deactivation_drpdwn"},Me=e("option",{value:""},"Select Deactivation Reasons",-1),Be=["value"],Le={key:0,class:"form-row invalid-feedback",style:{display:"block"}},qe={class:"col-md-12",id:"reason"},Ve=N('<div id="comments_div" class="mb-3 form-group"><label for="comments">Reason for status change <span class="error">*</span></label><textarea class="form-control" name="deactivation_reason" id="comments"></textarea><div id="comments" class="invalid-feedback"></div></div>',1),We={key:0,class:"form-row invalid-feedback",style:{display:"block"}},je={class:"modal-footer"},Ae=e("button",{type:"submit",class:"btn btn-primary float-right submit-active-deactive"},"Submit",-1);function Ue(f,a,u,t,y,p){const k=F("loading-spinner");return d(),n(I,null,[e("div",{class:S(["overlay",{open:t.isOpen}]),onClick:a[0]||(a[0]=(...i)=>t.closeModal&&t.closeModal(...i))},null,2),e("div",{class:S(["modal fade",{open:t.isOpen}]),style:{width:"490px",left:"32%","min-height":"400px","max-height":"485px"}},[e("form",{name:"active_deactive_form",id:"active_deactive_form",onSubmit:a[7]||(a[7]=T((...i)=>t.submitPatientForm&&t.submitPatientForm(...i),["prevent"]))},[e("div",B,[e("div",L,[q,e("button",{type:"button",class:"close",onClick:a[1]||(a[1]=(...i)=>t.closeModal&&t.closeModal(...i))},"Ã—")]),e("div",V,[R(k,{isLoading:t.isLoading},null,8,["isLoading"]),W,e("input",{type:"hidden",name:"module_id",value:u.moduleId},null,8,j),e("input",{type:"hidden",name:"component_id",value:u.componentId},null,8,A),U,z,G,K,e("input",{type:"hidden",name:"timearr[form_start_time]",class:"timearr form_start_time",value:t.time},null,8,X),e("div",H,[e("div",J,[e("div",Q,[Y,Z,t.formErrors.modules?(d(),n("div",ee,m(t.formErrors.modules[0]),1)):v("",!0)]),e("div",te,[e("div",oe,[ae,e("span",ie,[e("div",se,[e("label",de,[e("input",{type:"radio",id:"role1",class:"",name:"status",value:"1",formControlName:"radio",onClick:a[2]||(a[2]=i=>t.showReasonOptions(1))}),ne,re]),e("label",ce,[e("input",{type:"radio",id:"role0",class:"",name:"status",value:"0",formControlName:"radio",onClick:a[3]||(a[3]=i=>t.showReasonOptions(0))}),le,me]),e("label",_e,[e("input",{type:"radio",id:"role2",class:"",name:"status",value:"2",formControlName:"radio",onClick:a[4]||(a[4]=i=>t.showReasonOptions(2))}),ve,fe]),e("label",ue,[e("input",{type:"radio",id:"role3",class:"",name:"status",value:"3",formControlName:"radio",onClick:a[5]||(a[5]=i=>t.showReasonOptions(3))}),he,pe])])]),t.formErrors.status?(d(),n("div",ye,m(t.formErrors.status[0]),1)):v("",!0)])]),e("div",be,[e("div",we,[e("div",ke,[ge,$e,t.formErrors.activedeactivefromdate?(d(),n("div",Ee,m(t.formErrors.activedeactivefromdate[0]),1)):v("",!0)]),e("div",Ce,[Pe,Se,t.formErrors.deceasedfromdate?(d(),n("div",Ie,m(t.formErrors.deceasedfromdate[0]),1)):v("",!0)]),e("div",Ne,[xe,De,t.formErrors.activedeactivetodate?(d(),n("div",Fe,m(t.formErrors.activedeactivetodate[0]),1)):v("",!0)]),e("div",Te,[Re,e("select",Oe,[Me,(d(!0),n(I,null,O(t.Deactivations,i=>(d(),n("option",{key:i.id,value:i.id},m(i.reasons),9,Be))),128))]),t.formErrors.deactivation_drpdwn?(d(),n("div",Le,m(t.formErrors.deactivation_drpdwn[0]),1)):v("",!0)])])]),e("div",qe,[Ve,t.formErrors.deactivation_reason?(d(),n("div",We,m(t.formErrors.deactivation_reason[0]),1)):v("",!0)])])])]),e("div",je,[Ae,e("button",{type:"button",class:"btn btn-default float-left","data-dismiss":"modal",onClick:a[6]||(a[6]=(...i)=>t.closeModal&&t.closeModal(...i))},"Close")])])],32)],2)],64)}const Qe=D(M,[["render",Ue]]);export{Qe as default};
