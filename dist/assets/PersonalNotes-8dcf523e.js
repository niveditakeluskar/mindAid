import{_ as g,l as a,m as N,H as E,o as _,e as c,h as u,b as e,I as x,q as I,i as k,s as M,F as w,d as v,k as F}from"./appInertia-949a05bd.js";import"./AgGridTable.vue_vue_type_style_index_0_lang-f3773bde.js";const B={props:{patientId:Number,moduleId:Number,componentId:Number,stageid:Number,personal_notes_data:String},setup(i){let o=a(null),l=a(),t=a(null);const m=a(!1),r=a(!1);let s=a([]);const f=a(!1),h=()=>{console.log("Open personal modal called"),m.value=!0,o.value=document.getElementById("page_landing_times").value,l.value=document.getElementById("timer_runing_status").value},y=()=>{m.value=!1};let b=async()=>{let d=document.getElementById("personal_notes_form"),p=new FormData(d);v.defaults.headers.common["X-CSRF-TOKEN"]=document.querySelector('meta[name="csrf-token"]').content;try{s.value={};const n=await v.post("/patients/patient-personal-notes",p);n&&n.status==200&&(r.value=!0,updateTimer(i.patientId,"1",i.moduleId),$(".form_start_time").val(n.data.form_start_time),document.getElementById("personal_notes_form").reset(),setTimeout(()=>{r.value=!1,o.value=document.getElementById("page_landing_times").value},3e3))}catch(n){n.response&&n.response.status===422?s.value=n.response.data.errors:console.error("Error submitting form:",n)}this.closeModal()};return N(async()=>{try{o.value=document.getElementById("page_landing_times").value,t.value=i.personal_notes_data}catch(d){console.error("Error on page load:",d)}}),E(()=>r,(d,p)=>{r.value=d}),{loading:f,isOpen:m,openModal:h,closeModal:y,showAlert:r,formErrors:s,personalnotesTime:o,submitPersonalNotesForm:b,personal_notes_data:t,timerStatus:l}}},C={key:1,class:"modal fade open",style:{width:"500px",height:"242px",left:"33%",top:"20%"}},P={class:"modal-content"},S={class:"modal-header"},T=e("h4",{class:"modal-title"},"Personal Notes",-1),O={class:"modal-body"},V={class:"row"},A=e("button",{type:"button",class:"close","data-dismiss":"alert"},"x",-1),D=e("strong",null,"data saved successfully! ",-1),q=e("span",{id:"text"},null,-1),z=[A,D,q],H={class:"col-md-12"},K={class:"form-group"},R=["formErrors"],U=["value"],X=["value"],j=["value"],G=["value"],J=e("input",{type:"hidden",name:"id"},null,-1),L=e("input",{type:"hidden",name:"form_name",value:"personal_notes_form"},null,-1),Q=e("input",{type:"hidden",id:"timer_runing_status",value:"0"},null,-1),W=["value"],Y=e("label",null,[F("Personal Notes"),e("span",{class:"error"},"*")],-1),Z={key:0,class:"invalid-feedback",style:{display:"block"}},ee=["textContent"],te={class:"card-footer"},oe={class:"mc-footer"},se={class:"row"},ne={class:"col-lg-12 text-right"},le=["disabled"];function ae(i,o,l,t,m,r){return _(),c(w,null,[t.isOpen?(_(),c("div",{key:0,class:"overlay open",onClick:o[0]||(o[0]=(...s)=>t.closeModal&&t.closeModal(...s))})):u("",!0),t.isOpen?(_(),c("div",C,[e("div",P,[e("div",S,[T,e("button",{type:"button",class:"close",onClick:o[1]||(o[1]=(...s)=>t.closeModal&&t.closeModal(...s))},"Ã—")]),e("div",O,[e("div",V,[e("div",{class:"alert alert-success",style:x({display:t.showAlert?"block":"none"})},z,4),e("div",H,[e("div",K,[e("form",{id:"personal_notes_form",name:"personal_notes_form",onSubmit:o[3]||(o[3]=I((...s)=>t.submitPersonalNotesForm&&t.submitPersonalNotesForm(...s),["prevent"])),formErrors:t.formErrors},[e("input",{type:"hidden",name:"patient_id",id:"patient_id",value:l.patientId},null,8,U),e("input",{type:"hidden",name:"module_id",id:"page_module_id",value:l.moduleId},null,8,X),e("input",{type:"hidden",name:"component_id",id:"page_component_id",value:l.componentId},null,8,j),e("input",{type:"hidden",name:"stage_id",value:l.stageid},null,8,G),J,L,Q,e("input",{type:"hidden",name:"timearr[form_start_time]",class:"timearr form_start_time",value:t.personalnotesTime},null,8,W),Y,k(e("textarea",{name:"personal_notes",class:"form-control forms-element","onUpdate:modelValue":o[2]||(o[2]=s=>t.personal_notes_data=s)},null,512),[[M,t.personal_notes_data]]),t.formErrors.personal_notes?(_(),c("div",Z,[e("span",{textContent:t.formErrors.personal_notes[0]},null,8,ee)])):u("",!0)],40,R)])])])]),e("div",te,[e("div",oe,[e("div",se,[e("div",ne,[e("button",{type:"submit",class:"btn btn-primary float-right ml-2",id:"submit-personal-notes",onClick:o[4]||(o[4]=(...s)=>t.submitPersonalNotesForm&&t.submitPersonalNotesForm(...s)),disabled:t.timerStatus==1},"Save",8,le),e("button",{type:"button",class:"btn btn-default",onClick:o[5]||(o[5]=(...s)=>t.closeModal&&t.closeModal(...s))},"Close")])])])])])])):u("",!0)],64)}const ie=g(B,[["render",ae]]);export{ie as default};
