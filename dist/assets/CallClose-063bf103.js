import{C as p}from"./ContactTime-1a284a64.js";import{_ as f,d as u,r as q,o as n,e as r,b as e,q as v,I as b,i,R as _,t as m,h as a,k as d,s as c,f as k}from"./appInertia-949a05bd.js";const g={props:{patientId:Number,moduleId:Number,componentId:Number},data(){return{stepId:0,query1:null,query2:null,formErrors:{},showAlert:!1,timerStatus:null}},components:{ContactTime:p},mounted(){this.getCallCloseStageID(),this.timerStatus=document.getElementById("timer_runing_status").value},methods:{async getCallCloseStageID(){try{let l="Call_Close",t=await u.get(`/get_stage_id/${this.moduleId}/${this.componentId}/${l}`);this.stageId=t.data.stageID}catch{throw new Error("Failed to fetch stageID")}},async submitCallCloseForm(){const l={uid:this.patientId,patient_id:this.patientId,module_id:this.moduleId,component_id:this.componentId,stage_id:this.stageId,step_id:this.stepId,form_name:"call_close_form",form:"ccm",billable:1,start_time:"00:00:00",end_time:"00:00:00",_token:document.querySelector('meta[name="csrf-token"]').content,timearr:{form_start_time:document.getElementById("page_landing_times").value,form_save_time:"",pause_start_time:"",pause_end_time:"",extra_time:""},query1:this.query1,q1_notes:this.q1_notes,query2:this.query2,q2_datetime:this.q2_datetime,q2_time:this.q2_time,q2_notes:this.q2_notes,mon_0:this.mon_0,mon_1:this.mon_1,mon_2:this.mon_2,mon_3:this.mon_3,mon_any:this.mon_any,tue_0:this.tue_0,tue_1:this.tue_1,tue_2:this.tue_2,tue_3:this.tue_3,tue_any:this.tue_any,wed_0:this.wed_0,wed_1:this.wed_1,wed_2:this.wed_2,wed_3:this.wed_3,wed_any:this.wed_any,thu_0:this.thu_0,thu_1:this.thu_1,thu_2:this.thu_2,thu_3:this.thu_3,thu_any:this.thu_any,fri_0:this.fri_0,fri_1:this.fri_1,fri_2:this.fri_2,fri_3:this.fri_3,fri_any:this.fri_any};u.defaults.headers.common["X-CSRF-TOKEN"]=document.querySelector('meta[name="csrf-token"]').content;try{this.formErrors={};const t=await u.post("/ccm/monthly-monitoring-call-callclose",l);t&&t.status==200&&(this.showAlert=!0,updateTimer(this.patientId,1,this.moduleId),$(".form_start_time").val(t.data.form_start_time),setTimeout(()=>{this.showAlert=!1},3e3),this.$emit("form-submitted"))}catch(t){t.response&&t.response.status===422?this.formErrors=t.response.data.errors:console.error("Error submitting form:",t)}}}},w={class:"row"},C=e("div",{id:"success"},null,-1),I={class:"col-lg-12 mb-4"},E=e("input",{type:"hidden",name:"stage_id"},null,-1),S=e("input",{type:"hidden",name:"form",value:"ccm"},null,-1),x={class:"card"},N={class:"card-body"},V={class:"mb-4"},T=e("button",{type:"button",class:"close","data-dismiss":"alert"},"x",-1),D=e("strong",null,"Call close data saved successfully! ",-1),U=e("span",{id:"text"},null,-1),B=[T,D,U],A=e("span",null,[d("Are there any other issues impacting your health that you would like to talk about today that we have not addressed yet?"),e("span",{class:"error"},"*")],-1),F=e("br",null,null,-1),M={class:"forms-element d-inline-flex"},R={class:"radio radio-primary mr-3"},Y=e("span",null,"Yes",-1),z=e("span",{class:"checkmark"},null,-1),K={class:"radio radio-primary mr-3"},O=e("span",null,"No",-1),X=e("span",{class:"checkmark"},null,-1),j={key:0,class:"invalid-feedback",style:{display:"block"}},G={key:1},H={class:"mr-3 col-lg-12"},J=e("div",{class:"invalid-feedback"},null,-1),L={class:"mb-4"},P=e("span",null,[d("Do you have a preferred day and time for our call next month?"),e("span",{class:"error"},"*")],-1),Q=e("br",null,null,-1),W={class:"forms-element d-inline-flex"},Z={class:"radio radio-primary mr-3"},ee=e("span",null,"Yes",-1),te=e("span",{class:"checkmark"},null,-1),se={class:"radio radio-primary mr-3"},oe=e("span",null,"No",-1),le=e("span",{class:"checkmark"},null,-1),ie={key:0,class:"invalid-feedback",style:{display:"block"}},ne={key:1,id:"next_month_call_div",class:"nextcall"},re={class:"mr-3 d-inline-flex align-self-center"},ae={class:"forms-element mr-3"},de=e("span",{class:"error"},"*",-1),_e={key:0,class:"invalid-feedback",style:{display:"block"}},me={class:"forms-element mr-3"},ce=e("span",{class:"error"},"*",-1),ue={key:0,class:"invalid-feedback",style:{display:"block"}},he={class:""},ye={style:{width:"100%"}},pe=e("div",{class:"invalid-feedback"},null,-1),fe=e("hr",null,null,-1),qe=e("div",{class:"col-12 text-center"},[e("h3",null,"Best Time to contact")],-1),ve=e("hr",null,null,-1),be={class:"card-footer"},ke={class:"mc-footer"},ge={class:"row"},we={class:"col-lg-12 text-right"},Ce=["disabled"];function Ie(l,t,Ee,Se,s,h){const y=q("ContactTime");return n(),r("div",w,[C,e("div",I,[e("form",{id:"call_close_form",name:"call_close_form",onSubmit:t[8]||(t[8]=v((...o)=>h.submitCallCloseForm&&h.submitCallCloseForm(...o),["prevent"]))},[E,S,e("div",x,[e("div",N,[e("div",V,[e("div",{class:"alert alert-success",id:"success-alert",style:b({display:s.showAlert?"block":"none"})},B,4),A,F,e("div",M,[e("label",R,[i(e("input",{type:"radio",name:"query1",value:"1","onUpdate:modelValue":t[0]||(t[0]=o=>s.query1=o)},null,512),[[_,s.query1]]),Y,z]),e("label",K,[i(e("input",{type:"radio",name:"query1",value:"0","onUpdate:modelValue":t[1]||(t[1]=o=>s.query1=o)},null,512),[[_,s.query1]]),O,X])]),s.formErrors.query1?(n(),r("div",j,m(s.formErrors.query1[0]),1)):a("",!0),s.query1==1?(n(),r("div",G,[e("label",H,[d("Monthly Notes: "),i(e("textarea",{class:"forms-element form-control",name:"q1_notes",id:"q1_notes","onUpdate:modelValue":t[2]||(t[2]=o=>l.q1_notes=o)},null,512),[[c,l.q1_notes]])]),J])):a("",!0)]),e("div",L,[P,Q,e("div",W,[e("label",Z,[i(e("input",{type:"radio",name:"query2",value:"1",id:"newquery2_yes","onUpdate:modelValue":t[3]||(t[3]=o=>s.query2=o)},null,512),[[_,s.query2]]),ee,te]),e("label",se,[i(e("input",{type:"radio",name:"query2",value:"0",id:"newquery2_no","onUpdate:modelValue":t[4]||(t[4]=o=>s.query2=o)},null,512),[[_,s.query2]]),oe,le])]),s.formErrors.query2?(n(),r("div",ie,m(s.formErrors.query2[0]),1)):a("",!0),s.query2==1||s.query2==0?(n(),r("div",ne,[e("div",re,[e("label",ae,[d("Select Date:"),de,i(e("input",{type:"date",name:"q2_datetime","onUpdate:modelValue":t[5]||(t[5]=o=>l.q2_datetime=o),id:"next_month_call_date",class:"forms-element form-control"},null,512),[[c,l.q2_datetime]]),s.formErrors.q2_datetime?(n(),r("div",_e,m(s.formErrors.q2_datetime[0]),1)):a("",!0)]),e("label",me,[d("Select Time:"),ce,i(e("input",{type:"time",name:"q2_time","onUpdate:modelValue":t[6]||(t[6]=o=>l.q2_time=o),id:"next_month_call_time",class:"forms-element form-control"},null,512),[[c,l.q2_time]]),s.formErrors.q2_time?(n(),r("div",ue,m(s.formErrors.q2_time[0]),1)):a("",!0)])]),e("div",he,[e("label",ye,[d("Monthly Notes: "),i(e("textarea",{class:"forms-element form-control",name:"q2_notes","onUpdate:modelValue":t[7]||(t[7]=o=>l.q2_notes=o)},null,512),[[c,l.q2_notes]])]),pe]),e("div",null,[fe,qe,k(y),ve])])):a("",!0)])]),e("div",be,[e("div",ke,[e("div",ge,[e("div",we,[e("button",{type:"submit",class:"btn btn-primary m-1 office-visit",id:"save-call-close",disabled:s.timerStatus==1},"Next",8,Ce)])])])])])],32)])])}const Ve=f(g,[["render",Ie]]);export{Ve as default};
