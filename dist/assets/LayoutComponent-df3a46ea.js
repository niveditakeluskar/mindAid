import S from"./Header-2dd02e50.js";import _ from"./Footer-27143538.js";import{_ as y,d as a,r as f,o as k,e as D,f as w,g as b}from"./appInertia-949a05bd.js";const M={components:{Header:S,Footer:_,axios:a},data(){return{moduleId:null}},async mounted(){try{var t=window.location.href,o=0;t=t.split("/"),t.length==6&&(o=t[5].split("#")[0]);const s=await this.getPageModuleID();this.initializeScripts(s,o)}catch(s){console.error("Error fetching moduleID:",s)}},methods:{async getPageModuleID(){try{return(await a.get("/get_module_id")).data.moduleID}catch{throw new Error("Failed to fetch moduleID")}},async initializeScripts(t,o){try{const e=await a.get(`/task-management/patient-to-do/${o}/${t}/list`);$("#toDoList").html(e.data),$(".badge").html($("#count_todo").val());const l=await a.get(`/patients/patient-status/${o}/${t}/status`);$("#status_blockcontent").html(l.data);const r=await a.get(`/ccm/careplan-status/${o}/${t}/careplanstatus`);$("#careplan_blockcontent").html(r.data);let c=new Date,i=c.getFullYear(),m=c.getMonth()+1;const n=await a.get(`/ccm/previous-month-status/${o}/${t}/${m}/${i}/previousstatus`);$("#previousMonthData").html(n.data)}catch(e){console.error(e)}try{const e=await a.get("/patients/getCMtotaltime");var s=JSON.stringify(e.data);if(s=="null"||s=="")var p="00",d="00";else var p=e.data[0].totalpatients,d=e.data.minutes;var v=" : "+d+" / "+p;$(".cmtotaltimespent").html(v)}catch(e){console.error(e)}var u=$("body");$("#dark-checkbox").change(function(){if($(this).prop("checked")){u.addClass("dark-theme");var e=1}else{u.removeClass("dark-theme");var e=0}$.ajax({method:"get",url:"/org/ajax/theme-dark",data:{darkmode:e}})}),$(document).ready(function(){localStorage.setItem("idleTime",0),a({method:"GET",url:"/system/get-session-logout-time-with-popup-time"}).then(function(e){var l=e.data,r=l.logoutpoptime,c=l.session_timeout,i=c*60,m=i-r;localStorage.setItem("idleTime",0),localStorage.setItem("sessionTimeoutInSeconds",i),localStorage.setItem("showPopupTime",m);var n=new Date;localStorage.setItem("systemDate",n)}).catch(function(e){console.error(e,e.response)}),setInterval(T,1e3),$(this).mousemove(function(e){localStorage.setItem("idleTime",0)}),$(this).keypress(function(e){localStorage.setItem("idleTime",0)})});var g=0,T=function(){g=localStorage.getItem("idleTime");var l=localStorage.getItem("showPopupTime"),r=localStorage.getItem("sessionTimeoutInSeconds"),c=localStorage.getItem("systemDate"),i=new Date,m=Math.abs(Date.parse(i)-Date.parse(c))/1e3,n=parseInt(g)+m%60;if(console.log("sessionTimeoutInSeconds-"+r),n>=l){console.log("idleTime in if loop idleTime >= showPopupTime");var h=$("#logout_modal").is(":visible");if(h?console.log("visiblemodal"):$("#logout_modal").modal("show"),n>=r){console.log("idleTime in if loop idleTime >= sessionTimeoutInSeconds");var h=$("#logout_modal").is(":visible");if(h){console.log("visiblemodal in sessiontimeout"),$("#sign-out-btn")[0].click();var I=window.location.origin;window.location.href=I+"/rcare-login",window.location.reload()}}}localStorage.setItem("idleTime",n),localStorage.setItem("systemDate",i)};$("#logout_yes").click(function(e){$("#sign-out-btn")[0].click()}),$("#logout_no").click(function(e){$("#logout_modal").modal("hide")})}}};function P(t,o,s,p,d,v){const u=f("Header"),g=f("Footer");return k(),D("div",null,[w(u),b(t.$slots,"default",{moduleId:d.moduleId}),w(g)])}const E=y(M,[["render",P]]);export{E as default};
